/*! For license information please see 208.b0d8f685.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[208],{19742:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},29521:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},31555:(e,s,t)=>{t.d(s,{E:()=>c});var a=t(27051),l=t(53986),i=(t(65043),t(99766)),r=t(70579);const n=["className"];function c(e){let{className:s}=e,t=(0,l.A)(e,n);return(0,r.jsx)("div",(0,a.A)({className:(0,i.cn)("animate-pulse rounded-md bg-muted",s)},t))}},44919:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},50516:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},73208:(e,s,t)=>{t.r(s),t.d(s,{default:()=>P});var a=t(65043),l=t(35475),i=t(81228),r=t(64830),n=t(14459),c=t(21639);const d=(0,c.A)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var o=t(50516),m=t(7365),x=t(9493),h=t(19742),p=t(75088),u=t(19829),j=t(7899);const y=(0,c.A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),f=(0,c.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var N=t(29521),g=t(44919),v=t(34041),b=t(3550),w=t(18717),k=t(64168),A=t(91140),C=t(13390),M=t(63972),T=t(31555),S=t(99766),R=t(70579);const B=e=>{if(!e||e<60)return"< 1 min";const s=Math.floor(e/3600),t=Math.floor(e%3600/60);return s>0?"".concat(s,"h ").concat(t,"m"):"".concat(t,"m")},Z=e=>e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),E=e=>{let{icon:s,label:t,value:a,subtext:l,gradient:r,delay:n=0}=e;return(0,R.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n},children:(0,R.jsxs)(A.Zp,{className:"relative overflow-hidden",children:[(0,R.jsx)("div",{className:(0,S.cn)("absolute inset-0 opacity-10",r)}),(0,R.jsx)(A.Wu,{className:"pt-6 relative",children:(0,R.jsxs)("div",{className:"flex items-start justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-muted-foreground",children:t}),(0,R.jsx)("p",{className:"text-3xl font-bold mt-1",children:a}),l&&(0,R.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:l})]}),(0,R.jsx)("div",{className:(0,S.cn)("p-3 rounded-full",r),children:(0,R.jsx)(s,{className:"h-5 w-5 text-white"})})]})})]})})},H=e=>{let{track:s,rank:t,onPlay:a}=e;return(0,R.jsxs)(i.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-center gap-4 p-3 rounded-lg hover:bg-accent/50 transition-colors group cursor-pointer",onClick:()=>a(s),children:[(0,R.jsx)("span",{className:"text-lg font-bold text-muted-foreground w-6",children:t}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("img",{src:s.thumbnail||"/placeholder-album.jpg",alt:s.title,className:"w-12 h-12 rounded object-cover"}),(0,R.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded",children:(0,R.jsx)(r.A,{className:"h-5 w-5 text-white",fill:"white"})})]}),(0,R.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,R.jsx)("p",{className:"font-medium truncate",children:s.title}),(0,R.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:s.artist})]}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("p",{className:"font-semibold text-primary",children:s.playCount}),(0,R.jsx)("p",{className:"text-xs text-muted-foreground",children:"plays"})]})]})},W=e=>{let{artist:s,rank:t}=e;return(0,R.jsxs)(i.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"flex items-center gap-4 p-3 rounded-lg hover:bg-accent/50 transition-colors",children:[(0,R.jsx)("span",{className:"text-lg font-bold text-muted-foreground w-6",children:t}),(0,R.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center",children:(0,R.jsx)(n.A,{className:"h-6 w-6 text-white"})}),(0,R.jsx)("div",{className:"flex-1 min-w-0",children:(0,R.jsx)("p",{className:"font-medium truncate",children:s.name})}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("p",{className:"font-semibold text-primary",children:s.playCount}),(0,R.jsx)("p",{className:"text-xs text-muted-foreground",children:"plays"})]})]})},L=e=>{let{data:s}=e;const t=Math.max(...s.map(e=>e.minutes),1);return(0,R.jsx)("div",{className:"flex items-end justify-between gap-2 h-32 px-2",children:s.map((e,s)=>(0,R.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-2",children:[(0,R.jsx)(i.P.div,{initial:{height:0},animate:{height:"".concat(e.minutes/t*100,"%")},transition:{delay:.05*s,duration:.5},className:"w-full bg-gradient-to-t from-primary to-primary/60 rounded-t min-h-[4px]",style:{maxHeight:"100%"}}),(0,R.jsx)("span",{className:"text-xs text-muted-foreground",children:e.displayDate})]},e.date))})};function P(){const{user:e,isAuthenticated:s,isAdminUser:t}=(0,w.nc)(),{playTrack:c}=(0,w.ut)(),{stats:P,isLoading:q,fetchStats:z,getStatsSummary:U,getTopTracks:V,getTopArtists:$,getWeeklyActivity:I,resetStats:D}=(0,k.default)();(0,a.useEffect)(()=>{s&&z()},[s,z]);const _=(0,a.useMemo)(()=>U(),[P,U]),F=(0,a.useMemo)(()=>V(5),[P,V]),Y=(0,a.useMemo)(()=>$(5),[P,$]),K=(0,a.useMemo)(()=>I(),[P,I]),O=e=>{e&&e.id&&c({id:e.id,title:e.title,artist:e.artist,thumbnail:e.thumbnail,duration:e.duration,type:e.type})};return s?(0,R.jsxs)("div",{className:"min-h-full px-6 py-4 pb-32",children:[(0,R.jsxs)(i.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"relative mb-8",children:[(0,R.jsx)("div",{className:"absolute inset-0 h-48 bg-gradient-to-br from-primary/20 via-purple-600/20 to-pink-600/20 rounded-xl -z-10"}),(0,R.jsx)("div",{className:"pt-8 px-6",children:(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-end gap-6",children:[(0,R.jsxs)(M.eu,{className:"h-28 w-28 border-4 border-background shadow-xl",children:[(0,R.jsx)(M.BK,{src:null===e||void 0===e?void 0:e.photoURL,alt:null===e||void 0===e?void 0:e.displayName}),(0,R.jsx)(M.q5,{className:"text-3xl bg-gradient-to-br from-primary to-purple-600 text-white",children:(G=(null===e||void 0===e?void 0:e.displayName)||(null===e||void 0===e?void 0:e.email),G?G.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"U")})]}),(0,R.jsxs)("div",{className:"flex-1 text-center sm:text-left pb-4",children:[(0,R.jsx)("h1",{className:"text-3xl font-bold",children:(null===e||void 0===e?void 0:e.displayName)||"Music Lover"}),(0,R.jsx)("p",{className:"text-muted-foreground",children:null===e||void 0===e?void 0:e.email}),(0,R.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2 justify-center sm:justify-start",children:[t&&(0,R.jsx)("span",{className:"px-2 py-1 bg-primary/20 text-primary text-xs rounded-full font-medium",children:"Admin"}),(0,R.jsxs)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full font-medium flex items-center gap-1",children:[(0,R.jsx)(d,{className:"h-3 w-3"}),_.currentStreak," day streak"]})]})]}),(0,R.jsxs)("div",{className:"flex gap-2 pb-4",children:[(0,R.jsxs)(C.$,{variant:"outline",size:"sm",onClick:()=>{z()},disabled:q,children:[(0,R.jsx)(o.A,{className:(0,S.cn)("h-4 w-4 mr-2",q&&"animate-spin")}),"Refresh"]}),(0,R.jsx)(C.$,{variant:"outline",size:"sm",asChild:!0,children:(0,R.jsxs)(l.N_,{to:"/settings",children:[(0,R.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Settings"]})}),(0,R.jsxs)(C.$,{variant:"outline",size:"sm",onClick:async()=>{try{await(0,v.CI)(b.j2)}catch(e){console.error("Error signing out:",e)}},children:[(0,R.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})]}),(0,R.jsxs)("section",{className:"mb-8",children:[(0,R.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,R.jsx)(h.A,{className:"h-5 w-5 text-primary"}),"Your Stats"]}),(0,R.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,R.jsx)(E,{icon:p.A,label:"Total Listening",value:_.totalHours>0?"".concat(_.totalHours,"h"):"".concat(_.totalMinutes,"m"),subtext:"".concat(B(_.totalListeningTime)," of music"),gradient:"bg-gradient-to-br from-blue-500 to-cyan-500",delay:0}),(0,R.jsx)(E,{icon:r.A,label:"Total Plays",value:Z(_.totalPlays),subtext:"tracks played",gradient:"bg-gradient-to-br from-green-500 to-emerald-500",delay:.1}),(0,R.jsx)(E,{icon:u.A,label:"Unique Tracks",value:Z(_.uniqueTracks),subtext:"different songs",gradient:"bg-gradient-to-br from-purple-500 to-pink-500",delay:.2}),(0,R.jsx)(E,{icon:j.A,label:"Artists",value:Z(_.uniqueArtists),subtext:"unique artists",gradient:"bg-gradient-to-br from-orange-500 to-red-500",delay:.3})]})]}),(0,R.jsx)("section",{className:"mb-8",children:(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)(A.Zp,{children:[(0,R.jsxs)(A.aR,{children:[(0,R.jsxs)(A.ZB,{className:"flex items-center gap-2",children:[(0,R.jsx)(d,{className:"h-5 w-5 text-orange-500"}),"Listening Streaks"]}),(0,R.jsx)(A.BT,{children:"Keep the music playing!"})]}),(0,R.jsx)(A.Wu,{children:(0,R.jsxs)("div",{className:"flex justify-around text-center",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-4xl font-bold text-orange-500",children:_.currentStreak}),(0,R.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Streak"})]}),(0,R.jsx)("div",{className:"w-px bg-border"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-4xl font-bold text-yellow-500",children:_.longestStreak}),(0,R.jsx)("p",{className:"text-sm text-muted-foreground",children:"Longest Streak"})]})]})})]}),(0,R.jsxs)(A.Zp,{children:[(0,R.jsxs)(A.aR,{children:[(0,R.jsxs)(A.ZB,{className:"flex items-center gap-2",children:[(0,R.jsx)(y,{className:"h-5 w-5 text-primary"}),"This Week"]}),(0,R.jsx)(A.BT,{children:"Your listening activity"})]}),(0,R.jsx)(A.Wu,{children:(0,R.jsx)(L,{data:K})})]})]})}),(0,R.jsx)("section",{className:"mb-8",children:(0,R.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,R.jsxs)(A.Zp,{children:[(0,R.jsxs)(A.aR,{children:[(0,R.jsxs)(A.ZB,{className:"flex items-center gap-2",children:[(0,R.jsx)(f,{className:"h-5 w-5 text-yellow-500"}),"Top Tracks"]}),(0,R.jsx)(A.BT,{children:"Your most played songs"})]}),(0,R.jsx)(A.Wu,{children:q?(0,R.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,R.jsxs)("div",{className:"flex items-center gap-4 p-3",children:[(0,R.jsx)(T.E,{className:"w-6 h-6 rounded"}),(0,R.jsx)(T.E,{className:"w-12 h-12 rounded"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)(T.E,{className:"h-4 w-3/4 mb-2"}),(0,R.jsx)(T.E,{className:"h-3 w-1/2"})]})]},e))}):F.length>0?(0,R.jsx)("div",{className:"space-y-1",children:F.map((e,s)=>(0,R.jsx)(H,{track:{id:e.mediaId,title:e.title,artist:e.artist||e.artistName,thumbnail:e.thumbnail,playCount:e.playCount},rank:s+1,onPlay:O},e.mediaId||s))}):(0,R.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,R.jsx)(N.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,R.jsx)("p",{children:"No plays yet"}),(0,R.jsx)("p",{className:"text-sm",children:"Start listening to see your top tracks"})]})})]}),(0,R.jsxs)(A.Zp,{children:[(0,R.jsxs)(A.aR,{children:[(0,R.jsxs)(A.ZB,{className:"flex items-center gap-2",children:[(0,R.jsx)(g.A,{className:"h-5 w-5 text-green-500"}),"Top Artists"]}),(0,R.jsx)(A.BT,{children:"Artists you love the most"})]}),(0,R.jsx)(A.Wu,{children:q?(0,R.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5].map(e=>(0,R.jsxs)("div",{className:"flex items-center gap-4 p-3",children:[(0,R.jsx)(T.E,{className:"w-6 h-6 rounded"}),(0,R.jsx)(T.E,{className:"w-12 h-12 rounded-full"}),(0,R.jsx)("div",{className:"flex-1",children:(0,R.jsx)(T.E,{className:"h-4 w-3/4"})})]},e))}):Y.length>0?(0,R.jsx)("div",{className:"space-y-1",children:Y.map((e,s)=>(0,R.jsx)(W,{artist:e,rank:s+1},e.artistId||e.name||s))}):(0,R.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,R.jsx)(n.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,R.jsx)("p",{children:"No artists yet"}),(0,R.jsx)("p",{className:"text-sm",children:"Explore and listen to discover artists"})]})})]})]})}),(0,R.jsx)("section",{children:(0,R.jsxs)(A.Zp,{children:[(0,R.jsxs)(A.aR,{children:[(0,R.jsx)(A.ZB,{children:"Data Management"}),(0,R.jsx)(A.BT,{children:"Manage your listening data"})]}),(0,R.jsx)(A.Wu,{children:(0,R.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,R.jsx)(C.$,{variant:"outline",asChild:!0,children:(0,R.jsxs)(l.N_,{to:"/history",children:[(0,R.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"View History"]})}),(0,R.jsx)(C.$,{variant:"destructive",onClick:async()=>{window.confirm("Are you sure you want to clear all listening statistics? This cannot be undone.")&&await D()},children:"Clear All Stats"})]})})]})})]}):(0,R.jsx)("div",{className:"min-h-full px-6 py-4",children:(0,R.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:[(0,R.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center mb-6",children:(0,R.jsx)(n.A,{className:"h-10 w-10 text-white"})}),(0,R.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Welcome to MediaCore"}),(0,R.jsx)("p",{className:"text-muted-foreground mb-8 max-w-md",children:"Sign in to track your listening history, view your stats, and get personalized recommendations."}),(0,R.jsx)(C.$,{size:"lg",onClick:()=>window.dispatchEvent(new Event("show-login-modal")),className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:"Sign In"})]})});var G}},91140:(e,s,t)=>{t.d(s,{BT:()=>y,Wu:()=>f,ZB:()=>j,Zp:()=>p,aR:()=>u});var a=t(27051),l=t(53986),i=t(65043),r=t(99766),n=t(70579);const c=["className"],d=["className"],o=["className","children"],m=["className"],x=["className"],h=["className"],p=i.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.A)(e,c);return(0,n.jsx)("div",(0,a.A)({ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",t)},i))});p.displayName="Card";const u=i.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.A)(e,d);return(0,n.jsx)("div",(0,a.A)({ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t)},i))});u.displayName="CardHeader";const j=i.forwardRef((e,s)=>{let{className:t,children:i}=e,c=(0,l.A)(e,o);return(0,n.jsx)("h3",(0,a.A)((0,a.A)({ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t)},c),{},{children:i}))});j.displayName="CardTitle";const y=i.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.A)(e,m);return(0,n.jsx)("p",(0,a.A)({ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t)},i))});y.displayName="CardDescription";const f=i.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.A)(e,x);return(0,n.jsx)("div",(0,a.A)({ref:s,className:(0,r.cn)("p-6 pt-0",t)},i))});f.displayName="CardContent";i.forwardRef((e,s)=>{let{className:t}=e,i=(0,l.A)(e,h);return(0,n.jsx)("div",(0,a.A)({ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t)},i))}).displayName="CardFooter"}}]);
//# sourceMappingURL=208.b0d8f685.chunk.js.map