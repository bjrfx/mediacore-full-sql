/*! For license information please see 610.1e0edd17.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[610],{31555:(e,s,i)=>{i.d(s,{E:()=>r});var a=i(27051),t=i(53986),l=(i(65043),i(99766)),c=i(70579);const n=["className"];function r(e){let{className:s}=e,i=(0,t.A)(e,n);return(0,c.jsx)("div",(0,a.A)({className:(0,l.cn)("animate-pulse rounded-md bg-muted",s)},i))}},31837:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(21639).A)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]])},48186:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(21639).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},50610:(e,s,i)=>{i.r(s),i.d(s,{default:()=>q});var a=i(65043),t=i(73216),l=i(12265),c=i(81228),n=i(96938),r=i(92382),d=i(75088),o=i(7104),x=i(14918),m=i(31837),h=i(48186),j=i(19829),u=i(19340),w=i(64830),v=i(36661),y=i(53735),f=i(88306),N=i(82119),p=i(8707),g=i(81199),k=i(87015),A=i(43677),b=i(75699),C=i(94505),z=i(18717),M=i(13390),P=i(79026),$=i(31555),T=i(17484),E=i(99766),L=i(2123),_=i(70579);function q(){const{id:e}=(0,t.g)(),s=(0,t.Zp)(),{user:i}=(0,z.nc)(),[q,F]=(0,a.useState)(!0),{currentTrack:H,isPlaying:S,progress:U,duration:I,volume:B,isMuted:V,repeatMode:R,shuffleEnabled:D,playTrack:G,togglePlayPause:K,seek:O,setVolume:Q,toggleMute:Y,toggleRepeat:Z,toggleShuffle:J,skipNext:W,skipPrevious:X}=(0,z.ut)(),{isLiked:ee,toggleLike:se,addToHistory:ie}=(0,z.CA)(),{data:ae,isLoading:te,error:le}=(0,l.I)({queryKey:["media",e],queryFn:()=>C.O0.getMediaById(e),enabled:!!e}),ce=null===ae||void 0===ae?void 0:ae.data;(0,a.useEffect)(()=>{ce&&console.log("[MediaPlayer] Media loaded:",{id:ce.id,title:ce.title,mediaType:ce.mediaType,type:ce.type,showLyrics:q})},[ce,q]),(0,a.useEffect)(()=>{!ce||H&&H.id===ce.id||(G(ce),ie(ce))},[null===ce||void 0===ce?void 0:ce.id,null===H||void 0===H?void 0:H.id,G,ie]);const ne=async()=>{if(navigator.share)try{await navigator.share({title:null===ce||void 0===ce?void 0:ce.title,text:"Check out ".concat(null===ce||void 0===ce?void 0:ce.title),url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href)},re=I>0?U/I*100:0;return le?(0,_.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,_.jsxs)("div",{className:"text-center",children:[(0,_.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Failed to load media"}),(0,_.jsx)(M.$,{onClick:()=>s(-1),children:"Go Back"})]})}):(0,_.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,E.cn)("min-h-screen flex flex-col","video"===(null===ce||void 0===ce?void 0:ce.mediaType)?"bg-black":"bg-gradient-to-b from-card to-background"),children:[(0,_.jsxs)("header",{className:"flex items-center justify-between p-4 z-10",children:[(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>s(-1),children:(0,_.jsx)(r.A,{className:"h-6 w-6"})}),(0,_.jsx)("p",{className:"text-sm text-white/70 truncate max-w-[200px]",children:"Now Playing"}),(0,_.jsxs)("div",{className:"flex items-center gap-1",children:[(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:(0,E.cn)("text-white",q&&"text-primary"),onClick:()=>F(!q),title:"Toggle Lyrics",children:(0,_.jsx)(k.A,{className:"h-5 w-5"})}),(0,_.jsxs)(T.rI,{children:[(0,_.jsx)(T.ty,{asChild:!0,children:(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white",children:(0,_.jsx)(h.A,{className:"h-5 w-5"})})}),(0,_.jsxs)(T.SQ,{align:"end",children:[(0,_.jsxs)(T._2,{onClick:ne,children:[(0,_.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Share"]}),i&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(T._2,{onClick:()=>ce&&se(ce),children:[(0,_.jsx)(x.A,{className:"h-4 w-4 mr-2"}),ee(null===ce||void 0===ce?void 0:ce.id)?"Remove from Favorites":"Add to Favorites"]}),(0,_.jsxs)(T._2,{children:[(0,_.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add to Playlist"]})]}),(0,_.jsx)(T.mB,{}),(0,_.jsxs)(T._2,{children:[(0,_.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})]}),(0,_.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-8 py-4 overflow-hidden",children:[te?(0,_.jsx)($.E,{className:"w-72 h-72 rounded-lg"}):"video"===(null===ce||void 0===ce?void 0:ce.mediaType)||"video"===(null===ce||void 0===ce?void 0:ce.type)?(0,_.jsx)("div",{className:"relative w-full max-w-4xl aspect-video bg-black rounded-lg overflow-hidden",children:(0,_.jsx)("video",{src:ce.streamUrl||ce.fileUrl,poster:ce.thumbnailUrl,className:"w-full h-full",controls:!1})}):(0,_.jsxs)("div",{className:(0,E.cn)("flex items-start justify-center gap-8 w-full max-w-4xl",q?"flex-row":"flex-col items-center"),children:[(0,_.jsx)(c.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},className:(0,E.cn)("relative flex-shrink-0",q&&"w-48 md:w-64"),children:null!==ce&&void 0!==ce&&ce.thumbnailUrl?(0,_.jsx)("img",{src:ce.thumbnailUrl,alt:ce.title,className:(0,E.cn)("rounded-lg shadow-2xl object-cover",q?"w-48 h-48 md:w-64 md:h-64":"w-72 h-72",S&&"animate-pulse")}):(0,_.jsx)("div",{className:(0,E.cn)("rounded-lg bg-gradient-to-br from-primary/30 to-primary/10 flex items-center justify-center shadow-2xl",q?"w-48 h-48 md:w-64 md:h-64":"w-72 h-72"),children:(0,_.jsx)(j.A,{className:"h-24 w-24 text-primary/50"})})}),(0,_.jsx)(n.N,{children:q&&ce&&(0,_.jsx)(c.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex-1 h-64 md:h-80 min-w-0",children:(0,_.jsx)(L.dk,{mediaId:ce.id,currentTime:U,isPlaying:S})})})]}),(0,_.jsxs)("div",{className:"mt-8 text-center w-full max-w-md",children:[(0,_.jsx)("h1",{className:"text-2xl font-bold text-white truncate",children:te?(0,_.jsx)($.E,{className:"h-8 w-48 mx-auto"}):null===ce||void 0===ce?void 0:ce.title}),(0,_.jsx)("p",{className:"text-white/70 mt-2 truncate",children:te?(0,_.jsx)($.E,{className:"h-5 w-32 mx-auto"}):(null===ce||void 0===ce?void 0:ce.artist)||(null===ce||void 0===ce?void 0:ce.description)})]}),(0,_.jsxs)("div",{className:"w-full max-w-md mt-8",children:[(0,_.jsx)(P.A,{value:[re],max:100,step:.1,onValueChange:e=>{const s=e[0]/100*I;O(s)},className:"cursor-pointer"}),(0,_.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-white/50",children:[(0,_.jsx)("span",{children:(0,E.a3)(U)}),(0,_.jsx)("span",{children:(0,E.a3)(I)})]})]}),(0,_.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-6",children:[(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:(0,E.cn)("text-white/70 hover:text-white",D&&"text-primary"),onClick:J,children:(0,_.jsx)(N.A,{className:"h-5 w-5"})}),(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white hover:scale-110 transition-transform",onClick:X,children:(0,_.jsx)(p.A,{className:"h-6 w-6"})}),(0,_.jsx)(M.$,{size:"icon",className:"h-16 w-16 rounded-full bg-white text-black hover:scale-105 transition-transform",onClick:K,children:S?(0,_.jsx)(u.A,{className:"h-8 w-8"}):(0,_.jsx)(w.A,{className:"h-8 w-8 ml-1"})}),(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white hover:scale-110 transition-transform",onClick:W,children:(0,_.jsx)(g.A,{className:"h-6 w-6"})}),(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:(0,E.cn)("text-white/70 hover:text-white","off"!==R&&"text-primary"),onClick:Z,children:"one"===R?(0,_.jsx)(v.A,{className:"h-5 w-5"}):(0,_.jsx)(y.A,{className:"h-5 w-5"})})]}),(0,_.jsxs)("div",{className:"flex items-center justify-between w-full max-w-md mt-8",children:[(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:Y,children:V||0===B?(0,_.jsx)(b.A,{className:"h-5 w-5"}):(0,_.jsx)(A.A,{className:"h-5 w-5"})}),(0,_.jsx)("div",{className:"w-24",children:(0,_.jsx)(P.A,{value:[V?0:100*B],max:100,onValueChange:e=>Q(e[0]/100)})})]}),(0,_.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:()=>ce&&se(ce),children:(0,_.jsx)(x.A,{className:(0,E.cn)("h-5 w-5",ee(null===ce||void 0===ce?void 0:ce.id)&&"fill-primary text-primary")})}),(0,_.jsx)(M.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:ne,children:(0,_.jsx)(f.A,{className:"h-5 w-5"})})]})]}),ce&&(0,_.jsx)("div",{className:"mt-8 text-center text-white/50 text-sm",children:(0,_.jsxs)("p",{className:"flex items-center justify-center gap-4",children:[(0,_.jsxs)("span",{className:"flex items-center gap-1",children:[(0,_.jsx)(d.A,{className:"h-4 w-4"}),(0,E.a3)(ce.duration)]}),ce.createdAt&&(0,_.jsxs)("span",{children:["Added ",(0,E.Yq)(ce.createdAt)]})]})})]})]})}},88306:(e,s,i)=>{i.d(s,{A:()=>a});const a=(0,i(21639).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])}}]);
//# sourceMappingURL=610.1e0edd17.chunk.js.map