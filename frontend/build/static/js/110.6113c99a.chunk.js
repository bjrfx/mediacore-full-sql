"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[110],{17110:(e,s,a)=>{a.r(s),a.d(s,{default:()=>L});var t=a(65043),l=a(12265),r=a(81228),d=a(34537),n=a(19742),i=a(14319),c=a(75088),o=a(55731),m=a(44919),x=a(9875),u=a(20073),h=a(66305),f=a(91140),p=a(31555),j=a(5949),N=a(84370),g=a(99766),y=a(86150),v=a(50108),b=a(17869),w=a(4240),A=a(87734),R=a(13839),k=a(38643),q=a(52185),C=a(6026),Z=a(82291),F=a(60163),S=a(877),D=a(70579);const B=["#1DB954","#1ed760","#535353","#b3b3b3","#191414"];function L(){var e,s,a,L,W;const[E,I]=(0,t.useState)("30"),{data:K,isLoading:T}=(0,l.I)({queryKey:["admin","analytics","summary",E],queryFn:()=>h.ic.getAnalyticsSummary(parseInt(E))}),{data:P,isLoading:V}=(0,l.I)({queryKey:["admin","analytics","realtime"],queryFn:()=>h.ic.getRealTimeStats(),refetchInterval:3e4}),{data:z,isLoading:U}=(0,l.I)({queryKey:["admin","dashboard"],queryFn:()=>h.ic.getDashboard()}),{data:O}=(0,l.I)({queryKey:["admin","api-keys"],queryFn:()=>h.ic.getApiKeys()}),J=(null===K||void 0===K?void 0:K.data)||{},M=(null===P||void 0===P?void 0:P.data)||{},_=((null===z||void 0===z?void 0:z.data)||{}).charts||{},G=((null===O||void 0===O?void 0:O.data)||[]).reduce((e,s)=>e+(s.usageCount||0),0),H=G>0&&!J.totalRequests,Q=T||V||U,Y=_.methodDistribution?Object.entries(_.methodDistribution).map(e=>{let[s,a]=e;return{name:s,value:a}}):[];return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h2",{className:"text-2xl font-bold",children:"Analytics"}),(0,D.jsx)("p",{className:"text-muted-foreground",children:"Monitor API usage and performance"})]}),(0,D.jsxs)(N.l6,{value:E,onValueChange:I,children:[(0,D.jsx)(N.bq,{className:"w-40",children:(0,D.jsx)(N.yv,{})}),(0,D.jsxs)(N.gC,{children:[(0,D.jsx)(N.eb,{value:"7",children:"Last 7 days"}),(0,D.jsx)(N.eb,{value:"30",children:"Last 30 days"}),(0,D.jsx)(N.eb,{value:"90",children:"Last 90 days"})]})]})]}),H&&(0,D.jsx)(f.Zp,{className:"border-yellow-500/30 bg-yellow-500/5",children:(0,D.jsx)(f.Wu,{className:"py-3 px-4",children:(0,D.jsx)("p",{className:"text-sm text-yellow-500",children:"\u26a0\ufe0f Detailed analytics not available. Showing aggregate data from API key usage. Enable request logging on the backend for full analytics."})})}),(0,D.jsxs)(f.Zp,{children:[(0,D.jsx)(f.aR,{children:(0,D.jsxs)(f.ZB,{className:"flex items-center gap-2",children:[(0,D.jsx)(u.A,{className:"h-5 w-5 text-yellow-500"}),"Real-time (Last 24 hours)"]})}),(0,D.jsx)(f.Wu,{children:V?(0,D.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>(0,D.jsx)(p.E,{className:"h-20"},s))}):(0,D.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("p",{className:"text-3xl font-bold text-primary",children:H?"\u2014":(0,g.ZV)(M.requestsLast24h||0)}),(0,D.jsx)("p",{className:"text-sm text-muted-foreground",children:"Requests"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("p",{className:"text-3xl font-bold",children:H?"\u2014":"".concat((null===(e=M.avgResponseTime)||void 0===e?void 0:e.toFixed(0))||0,"ms")}),(0,D.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Response"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("p",{className:"text-3xl font-bold text-green-500",children:H?"~100%":"".concat((null===(s=M.successRate)||void 0===s?void 0:s.toFixed(1))||0,"%")}),(0,D.jsx)("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("p",{className:"text-3xl font-bold",children:H?"\u2014":M.uniqueVisitors||0}),(0,D.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unique IPs"})]})]})})]}),(0,D.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{title:"Total Requests",value:(0,g.ZV)(J.totalRequests||G||0),icon:d.A,color:"text-blue-500"},{title:"Successful",value:(0,g.ZV)(J.successfulRequests||(H?G:0)),icon:i.A,color:"text-green-500"},{title:"Failed",value:(0,g.ZV)(J.failedRequests||0),icon:x.A,color:"text-red-500"},{title:"Avg Response",value:"".concat((null===(a=J.avgResponseTime)||void 0===a?void 0:a.toFixed(0))||0,"ms"),icon:c.A,color:"text-orange-500"}].map((e,s)=>(0,D.jsx)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},children:(0,D.jsx)(f.Zp,{children:(0,D.jsx)(f.Wu,{className:"p-4",children:Q?(0,D.jsx)(p.E,{className:"h-16"}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,D.jsx)(e.icon,{className:"h-4 w-4 ".concat(e.color)}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:e.title})]}),(0,D.jsx)("p",{className:"text-2xl font-bold",children:e.value})]})})})},e.title))}),(0,D.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,D.jsxs)(f.Zp,{className:"lg:col-span-2",children:[(0,D.jsx)(f.aR,{children:(0,D.jsxs)(f.ZB,{className:"flex items-center gap-2",children:[(0,D.jsx)(m.A,{className:"h-5 w-5 text-muted-foreground"}),"Requests Over Time"]})}),(0,D.jsx)(f.Wu,{children:U?(0,D.jsx)(p.E,{className:"h-64 w-full"}):(null===(L=_.dailyRequests)||void 0===L?void 0:L.length)>0?(0,D.jsx)(v.u,{width:"100%",height:300,children:(0,D.jsxs)(S.Q,{data:_.dailyRequests,children:[(0,D.jsx)(A.d,{strokeDasharray:"3 3",stroke:"#333"}),(0,D.jsx)(q.W,{dataKey:"date",stroke:"#888",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en",{day:"numeric",month:"short"})}),(0,D.jsx)(C.h,{stroke:"#888",fontSize:12}),(0,D.jsx)(y.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"},labelFormatter:e=>new Date(e).toLocaleDateString()}),(0,D.jsx)(R.G,{type:"monotone",dataKey:"count",stroke:"#1DB954",fill:"#1DB954",fillOpacity:.2,strokeWidth:2})]})}):(0,D.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available for this period"})})]}),(0,D.jsxs)(f.Zp,{children:[(0,D.jsx)(f.aR,{children:(0,D.jsxs)(f.ZB,{className:"flex items-center gap-2",children:[(0,D.jsx)(n.A,{className:"h-5 w-5 text-muted-foreground"}),"Top Endpoints"]})}),(0,D.jsx)(f.Wu,{children:U?(0,D.jsx)(p.E,{className:"h-64 w-full"}):(null===(W=_.topEndpoints)||void 0===W?void 0:W.length)>0?(0,D.jsx)(v.u,{width:"100%",height:250,children:(0,D.jsxs)(Z.E,{data:_.topEndpoints.slice(0,5),children:[(0,D.jsx)(A.d,{strokeDasharray:"3 3",stroke:"#333"}),(0,D.jsx)(q.W,{dataKey:"endpoint",stroke:"#888",fontSize:10,tickFormatter:e=>e.length>12?e.slice(0,12)+"...":e}),(0,D.jsx)(C.h,{stroke:"#888",fontSize:12}),(0,D.jsx)(y.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"}}),(0,D.jsx)(k.y,{dataKey:"count",fill:"#1DB954",radius:[4,4,0,0]})]})}):(0,D.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,D.jsxs)(f.Zp,{children:[(0,D.jsx)(f.aR,{children:(0,D.jsxs)(f.ZB,{className:"flex items-center gap-2",children:[(0,D.jsx)(o.A,{className:"h-5 w-5 text-muted-foreground"}),"Request Methods"]})}),(0,D.jsx)(f.Wu,{children:U?(0,D.jsx)(p.E,{className:"h-64 w-full"}):Y.length>0?(0,D.jsx)(v.u,{width:"100%",height:250,children:(0,D.jsxs)(F.r,{children:[(0,D.jsx)(w.F,{data:Y,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:a}=e;return"".concat(s," ").concat((100*a).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:Y.map((e,s)=>(0,D.jsx)(b.f,{fill:B[s%B.length]},"cell-".concat(s)))}),(0,D.jsx)(y.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"}})]})}):(0,D.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]})]}),J.statusCodeBreakdown&&(0,D.jsxs)(f.Zp,{children:[(0,D.jsx)(f.aR,{children:(0,D.jsx)(f.ZB,{children:"Status Code Breakdown"})}),(0,D.jsx)(f.Wu,{children:(0,D.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.entries(J.statusCodeBreakdown).map(e=>{let[s,a]=e;return(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)(j.E,{variant:s.startsWith("2")?"success":s.startsWith("4")?"warning":"destructive",children:s}),(0,D.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,g.ZV)(a)})]},s)})})})]})]})}},31555:(e,s,a)=>{a.d(s,{E:()=>i});var t=a(27051),l=a(53986),r=(a(65043),a(99766)),d=a(70579);const n=["className"];function i(e){let{className:s}=e,a=(0,l.A)(e,n);return(0,d.jsx)("div",(0,t.A)({className:(0,r.cn)("animate-pulse rounded-md bg-muted",s)},a))}},84370:(e,s,a)=>{a.d(s,{bq:()=>v,eb:()=>R,gC:()=>A,l6:()=>g,yv:()=>y});var t=a(27051),l=a(53986),r=a(65043),d=a(22095),n=a(36210),i=a(92382),c=a(15711),o=a(99766),m=a(70579);const x=["className","children"],u=["className"],h=["className"],f=["className","children","position"],p=["className"],j=["className","children"],N=["className"],g=d.bL,y=(d.YJ,d.WT),v=r.forwardRef((e,s)=>{let{className:a,children:r}=e,n=(0,l.A)(e,x);return(0,m.jsxs)(d.l9,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},n),{},{children:[r,(0,m.jsx)(d.In,{asChild:!0,children:(0,m.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}))});v.displayName=d.l9.displayName;const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,m.jsx)(d.PP,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});b.displayName=d.PP.displayName;const w=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,m.jsx)(d.wn,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(i.A,{className:"h-4 w-4"})}))});w.displayName=d.wn.displayName;const A=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper"}=e,i=(0,l.A)(e,f);return(0,m.jsx)(d.ZL,{children:(0,m.jsxs)(d.UC,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n},i),{},{children:[(0,m.jsx)(b,{}),(0,m.jsx)(d.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,m.jsx)(w,{})]}))})});A.displayName=d.UC.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,p);return(0,m.jsx)(d.JU,(0,t.A)({ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},r))}).displayName=d.JU.displayName;const R=r.forwardRef((e,s)=>{let{className:a,children:r}=e,i=(0,l.A)(e,j);return(0,m.jsxs)(d.q7,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},i),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(d.VF,{children:(0,m.jsx)(n.A,{className:"h-4 w-4"})})}),(0,m.jsx)(d.p4,{children:r})]}))});R.displayName=d.q7.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,N);return(0,m.jsx)(d.wv,(0,t.A)({ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=d.wv.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>j,Wu:()=>N,ZB:()=>p,Zp:()=>h,aR:()=>f});var t=a(27051),l=a(53986),r=a(65043),d=a(99766),n=a(70579);const i=["className"],c=["className"],o=["className","children"],m=["className"],x=["className"],u=["className"],h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,i);return(0,n.jsx)("div",(0,t.A)({ref:s,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},r))});h.displayName="Card";const f=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,n.jsx)("div",(0,t.A)({ref:s,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a)},r))});f.displayName="CardHeader";const p=r.forwardRef((e,s)=>{let{className:a,children:r}=e,i=(0,l.A)(e,o);return(0,n.jsx)("h3",(0,t.A)((0,t.A)({ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a)},i),{},{children:r}))});p.displayName="CardTitle";const j=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,n.jsx)("p",(0,t.A)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a)},r))});j.displayName="CardDescription";const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,x);return(0,n.jsx)("div",(0,t.A)({ref:s,className:(0,d.cn)("p-6 pt-0",a)},r))});N.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,n.jsx)("div",(0,t.A)({ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",a)},r))}).displayName="CardFooter"}}]);
//# sourceMappingURL=110.6113c99a.chunk.js.map