/*! For license information please see 762.f45c2a30.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[762],{44762:(e,t,s)=>{s.r(t),s.d(t,{default:()=>se});var i,a,l,n,r,o,c,d,m,h,u=s(27051),x=s(65043),p=s(12265),g=s(53986),v=s(39790),f=s(55149),y=s(26562),b=s(38458),j=s(24558),A=s(11454),N=s(20888),w=s(60329),k=s(99723);function C(e,t){const s=new Set(t);return e.filter(e=>!s.has(e))}var M=(i=new WeakMap,a=new WeakMap,l=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakMap,c=new WeakMap,d=new WeakMap,m=new WeakMap,h=new WeakSet,class extends w.Q{constructor(e,t,s){super(),(0,v.A)(this,h),(0,f.A)(this,i,void 0),(0,f.A)(this,a,void 0),(0,f.A)(this,l,void 0),(0,f.A)(this,n,void 0),(0,f.A)(this,r,void 0),(0,f.A)(this,o,void 0),(0,f.A)(this,c,void 0),(0,f.A)(this,d,void 0),(0,f.A)(this,m,[]),(0,j.A)(i,this,e),(0,j.A)(n,this,s),(0,j.A)(l,this,[]),(0,j.A)(r,this,[]),(0,j.A)(a,this,[]),this.setQueries(t)}onSubscribe(){1===this.listeners.size&&(0,b.A)(r,this).forEach(e=>{e.subscribe(t=>{(0,y.A)(h,this,L).call(this,e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,(0,b.A)(r,this).forEach(e=>{e.destroy()})}setQueries(e,t){(0,j.A)(l,this,e),(0,j.A)(n,this,t),A.jG.batch(()=>{const e=(0,b.A)(r,this),t=(0,y.A)(h,this,I).call(this,(0,b.A)(l,this));(0,j.A)(m,this,t),t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));const s=t.map(e=>e.observer),i=s.map(e=>e.getCurrentResult()),n=e.length!==s.length,o=s.some((t,s)=>t!==e[s]),c=n||o,d=!!c||i.some((e,t)=>{const s=(0,b.A)(a,this)[t];return!s||!(0,k.f8)(e,s)});(c||d)&&(c&&(0,j.A)(r,this,s),(0,j.A)(a,this,i),this.hasListeners()&&(c&&(C(e,s).forEach(e=>{e.destroy()}),C(s,e).forEach(e=>{e.subscribe(t=>{(0,y.A)(h,this,L).call(this,e,t)})})),(0,y.A)(h,this,P).call(this)))})}getCurrentResult(){return(0,b.A)(a,this)}getQueries(){return(0,b.A)(r,this).map(e=>e.getCurrentQuery())}getObservers(){return(0,b.A)(r,this)}getOptimisticResult(e,t){const s=(0,y.A)(h,this,I).call(this,e),i=s.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[i,e=>(0,y.A)(h,this,O).call(this,null!==e&&void 0!==e?e:i,t),()=>(0,y.A)(h,this,E).call(this,i,s)]}});function E(e,t){return t.map((s,i)=>{const a=e[i];return s.defaultedQueryOptions.notifyOnChangeProps?a:s.observer.trackResult(a,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}function O(e,t){return t?((0,b.A)(o,this)&&(0,b.A)(a,this)===(0,b.A)(d,this)&&t===(0,b.A)(c,this)||((0,j.A)(c,this,t),(0,j.A)(d,this,(0,b.A)(a,this)),(0,j.A)(o,this,(0,k.BH)((0,b.A)(o,this),t(e)))),(0,b.A)(o,this)):e}function I(e){const t=new Map;(0,b.A)(r,this).forEach(e=>{const s=e.options.queryHash;if(!s)return;const i=t.get(s);i?i.push(e):t.set(s,[e])});const s=[];return e.forEach(e=>{var a;const l=(0,b.A)(i,this).defaultQueryOptions(e),n=null===(a=t.get(l.queryHash))||void 0===a?void 0:a.shift(),r=null!==n&&void 0!==n?n:new N.$((0,b.A)(i,this),l);s.push({defaultedQueryOptions:l,observer:r})}),s}function L(e,t){const s=(0,b.A)(r,this).indexOf(e);-1!==s&&((0,j.A)(a,this,function(e,t,s){const i=e.slice(0);return i[t]=s,i}((0,b.A)(a,this),s,t)),(0,y.A)(h,this,P).call(this))}function P(){if(this.hasListeners()){var e;const t=(0,b.A)(o,this),s=(0,y.A)(h,this,E).call(this,(0,b.A)(a,this),(0,b.A)(m,this));t!==(0,y.A)(h,this,O).call(this,s,null===(e=(0,b.A)(n,this))||void 0===e?void 0:e.combine)&&A.jG.batch(()=>{this.listeners.forEach(e=>{e((0,b.A)(a,this))})})}}var S=s(63248),Q=s(72322),R=s(14557),q=s(61069),U=s(70292);const W=["queries"];var z=s(81228),T=s(56099),V=s(64830),B=s(55731);const _=(0,s(21639).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var D=s(38326),G=s(9333),H=s(19829),$=s(50797),F=s(44919),X=s(35475),K=s(66305),J=s(18717),Z=s(89442),Y=s(13390),ee=s(99766),te=s(70579);function se(){const{user:e,isAuthenticated:t,isAdminUser:s}=(0,J.nc)(),{playTrack:i,history:a,getResumeItems:l,playbackProgress:n}=(0,J.ut)(),[r,o]=(0,x.useState)(null),c=(0,x.useMemo)(()=>l(),[l,n,a]),{data:d,isLoading:m}=(0,p.I)({queryKey:["media","all"],queryFn:()=>K.O0.getMedia({limit:50})}),h=(null===d||void 0===d?void 0:d.data)||[],v=function(e,t){let{queries:s}=e,i=(0,g.A)(e,W);const a=(0,S.jE)(t),l=(0,Q.w)(),n=(0,R.h)(),r=x.useMemo(()=>s.map(e=>{const t=a.defaultQueryOptions(e);return t._optimisticResults=l?"isRestoring":"optimistic",t}),[s,a,l]);r.forEach(e=>{(0,U.jv)(e),(0,q.LJ)(e,n)}),(0,q.wZ)(n);const[o]=x.useState(()=>new M(a,r,i)),[c,d,m]=o.getOptimisticResult(r,i.combine),h=!l&&!1!==i.subscribed;x.useSyncExternalStore(x.useCallback(e=>h?o.subscribe(A.jG.batchCalls(e)):k.lQ,[o,h]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),x.useEffect(()=>{o.setQueries(r,i)},[r,i,o]);const u=c.some((e,t)=>(0,U.EU)(r[t],e))?c.flatMap((e,t)=>{const s=r[t];if(s){const t=new N.$(a,s);if((0,U.EU)(s,e))return(0,U.iL)(s,t,n);(0,U.nE)(e,l)&&(0,U.iL)(s,t,n)}return[]}):[];if(u.length>0)throw Promise.all(u);const p=c.find((e,t)=>{const s=r[t];return s&&(0,q.$1)({result:e,errorResetBoundary:n,throwOnError:s.throwOnError,query:a.getQueryCache().get(s.queryHash),suspense:s.suspense})});if(null!==p&&void 0!==p&&p.error)throw p.error;return d(m())}({queries:(0,x.useMemo)(()=>[...new Set(h.filter(e=>e.albumId).map(e=>e.albumId))],[h]).map(e=>({queryKey:["album",e],queryFn:()=>K.O0.getAlbumById(e),staleTime:3e5,enabled:!!e}))}),f=(0,x.useMemo)(()=>{const e={};return v.forEach(t=>{var s;if(null!==(s=t.data)&&void 0!==s&&s.data){var i,a;const s=t.data.data;e[s.id]={title:s.title,coverImage:s.coverImage,artistName:(null===(i=s.artist)||void 0===i?void 0:i.name)||"",artistId:(null===(a=s.artist)||void 0===a?void 0:a.id)||s.artistId}}}),e},[v]),y=(0,x.useMemo)(()=>h.map(e=>{const t=e.albumId?f[e.albumId]:null;return(0,u.A)((0,u.A)({},e),{},{artistName:(null===t||void 0===t?void 0:t.artistName)||e.subtitle||"",albumTitle:(null===t||void 0===t?void 0:t.title)||"",albumCover:(null===t||void 0===t?void 0:t.coverImage)||""})}),[h,f]),b=(0,x.useMemo)(()=>{const e={};return y.forEach(t=>{const s=t.language||"en";e[s]=(e[s]||0)+1}),Object.entries(e).map(e=>{let[t,s]=e;return{code:t,count:s}}).sort((e,t)=>t.count-e.count)},[y]),j=(0,x.useMemo)(()=>r?y.filter(e=>(e.language||"en")===r):y,[y,r]),w=(0,x.useMemo)(()=>j.filter(e=>"video"===e.type).slice(0,12),[j]),C=(0,x.useMemo)(()=>j.filter(e=>"audio"===e.type).slice(0,12),[j]),E=a.slice(0,6),O=y[0];return(0,te.jsxs)("div",{className:"min-h-full pb-8",children:[(0,te.jsxs)("div",{className:"relative overflow-hidden",children:[(0,te.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/20 via-background/50 to-background"}),(0,te.jsx)("div",{className:"relative px-6 pt-6 pb-4",children:(0,te.jsxs)(z.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-bold",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),t&&null!==e&&void 0!==e&&e.displayName?", ".concat(e.displayName.split(" ")[0]):""]})})]}),O&&(0,te.jsx)("div",{className:"px-4 sm:px-6 mb-8",children:(0,te.jsxs)(z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative rounded-2xl overflow-hidden shadow-2xl cursor-pointer group",onClick:()=>i(O,y),children:[(0,te.jsxs)("div",{className:"aspect-[1.5/1] sm:aspect-[2/1] md:aspect-[3/1] lg:aspect-[4/1] relative",children:[O.thumbnail?(0,te.jsx)("img",{src:O.thumbnail,alt:O.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):(0,te.jsx)(Z.X1,{id:O.id,isVideo:"video"===O.type,size:"large"}),(0,te.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 via-black/50 to-transparent"}),(0,te.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]}),(0,te.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-end p-4 sm:p-6 md:p-8",children:[(0,te.jsxs)(z.P.span,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"inline-flex items-center gap-1 sm:gap-1.5 text-[10px] sm:text-xs font-semibold text-primary bg-primary/20 backdrop-blur-sm px-2 sm:px-3 py-0.5 sm:py-1 rounded-full w-fit mb-2 sm:mb-3",children:[(0,te.jsx)(T.A,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"}),"FEATURED"]}),(0,te.jsx)(z.P.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-lg sm:text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-1 sm:mb-2 line-clamp-2",children:O.title}),(0,te.jsx)(z.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"text-white/70 text-xs sm:text-sm md:text-base mb-3 sm:mb-4 line-clamp-1",children:O.artistName||O.subtitle||"Start exploring amazing content"}),(0,te.jsxs)(z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex items-center gap-2 sm:gap-3",children:[(0,te.jsxs)(Y.$,{variant:"spotify",size:"sm",className:"shadow-lg sm:h-10 sm:px-4 sm:text-sm",onClick:e=>{e.stopPropagation(),y.length>0&&i(y[0],y)},children:[(0,te.jsx)(V.A,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-1 sm:mr-2",fill:"currentColor"}),"Play All"]}),(0,te.jsx)("span",{className:(0,ee.cn)("px-2 sm:px-3 py-1 sm:py-1.5 rounded-full text-[10px] sm:text-xs font-medium backdrop-blur-sm","video"===O.type?"bg-blue-500/30 text-blue-200":"bg-green-500/30 text-green-200"),children:"video"===O.type?"VIDEO":"AUDIO"})]})]})]})}),E.length>0&&(0,te.jsx)("div",{className:"px-6 mb-8",children:(0,te.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:E.map((e,t)=>(0,te.jsxs)(z.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},onClick:()=>i(e,E),className:"group flex items-center gap-3 bg-white/5 hover:bg-white/10 rounded-lg overflow-hidden cursor-pointer transition-all duration-200",children:[(0,te.jsx)("div",{className:"w-12 h-12 shrink-0",children:e.thumbnail?(0,te.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):(0,te.jsx)(Z.X1,{title:e.title,id:e.id,isVideo:"video"===e.type,size:"small"})}),(0,te.jsx)("span",{className:"font-medium text-sm truncate pr-2 flex-1",children:e.title}),(0,te.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity pr-2",children:(0,te.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shadow-lg",children:(0,te.jsx)(V.A,{className:"h-4 w-4 text-primary-foreground ml-0.5",fill:"currentColor"})})})]},e.id))})}),(0,te.jsxs)("div",{id:"content-sections",className:"px-6 space-y-10",children:[b.length>1&&(0,te.jsx)(Z.XV,{languages:b,onLanguageSelect:e=>{var t;o(e),null===(t=document.getElementById("content-sections"))||void 0===t||t.scrollIntoView({behavior:"smooth"})},title:"Browse by Language"}),r&&b.length>1&&(0,te.jsxs)("section",{className:"space-y-3",children:[(0,te.jsxs)("div",{className:"flex items-center gap-2",children:[(0,te.jsx)(B.A,{className:"h-5 w-5 text-primary"}),(0,te.jsx)("h2",{className:"text-xl font-bold",children:"Filtering by Language"})]}),(0,te.jsx)(Z.E1,{languages:b,selectedLanguage:r,onLanguageSelect:o})]}),c.length>0&&(0,te.jsxs)("section",{children:[(0,te.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,te.jsxs)("div",{className:"flex items-center gap-2",children:[(0,te.jsx)(_,{className:"h-5 w-5 text-primary"}),(0,te.jsx)("h2",{className:"text-2xl font-bold",children:"Continue Watching"})]}),(0,te.jsxs)(X.N_,{to:"/history",className:"text-sm text-muted-foreground hover:text-primary flex items-center gap-1 transition-colors",children:["View all ",(0,te.jsx)(D.A,{className:"h-4 w-4"})]})]}),(0,te.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:c.slice(0,5).map((e,t)=>{var s,a,l,n;return(0,te.jsxs)(z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>(e=>{i(e,null,!0)})(e),className:"group relative cursor-pointer",children:[(0,te.jsxs)("div",{className:"aspect-video rounded-lg overflow-hidden mb-2 relative",children:[e.thumbnail?(0,te.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,te.jsx)(Z.X1,{title:e.title,id:e.id,isVideo:"video"===e.type,size:"medium"}),(0,te.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/50",children:(0,te.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:"".concat((null===(s=e.progress)||void 0===s?void 0:s.percentage)||0,"%")}})}),(0,te.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,te.jsx)(Y.$,{variant:"spotify",size:"icon",className:"h-12 w-12 shadow-lg",children:(0,te.jsx)(V.A,{className:"h-6 w-6 ml-0.5",fill:"currentColor"})})}),(0,te.jsx)("span",{className:(0,ee.cn)("absolute top-2 left-2 text-xs font-medium px-2 py-0.5 rounded","video"===e.type?"bg-blue-500/80":"bg-green-500/80"),children:"video"===e.type?"VIDEO":"AUDIO"})]}),(0,te.jsx)("h3",{className:"font-semibold text-sm truncate",children:e.title}),(0,te.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null===(a=e.progress)||void 0===a?void 0:a.percentage,"% \u2022 ",(0,ee.a3)((null===(l=e.progress)||void 0===l?void 0:l.duration)-(null===(n=e.progress)||void 0===n?void 0:n.currentTime))," left"]})]},e.id)})})]}),(w.length>0||m)&&(0,te.jsxs)("section",{children:[(0,te.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,te.jsxs)("div",{className:"flex items-center gap-2",children:[(0,te.jsx)(G.A,{className:"h-5 w-5 text-blue-400"}),(0,te.jsx)("h2",{className:"text-2xl font-bold",children:"Videos"})]}),w.length>6&&(0,te.jsxs)(X.N_,{to:"/search?type=video",className:"text-sm text-muted-foreground hover:text-primary flex items-center gap-1 transition-colors",children:["Show all ",(0,te.jsx)(D.A,{className:"h-4 w-4"})]})]}),(0,te.jsx)(Z.hT,{media:w,isLoading:m,emptyMessage:null})]}),(C.length>0||m)&&(0,te.jsxs)("section",{children:[(0,te.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,te.jsxs)("div",{className:"flex items-center gap-2",children:[(0,te.jsx)(H.A,{className:"h-5 w-5 text-green-400"}),(0,te.jsx)("h2",{className:"text-2xl font-bold",children:"Audio"})]}),C.length>6&&(0,te.jsxs)(X.N_,{to:"/search?type=audio",className:"text-sm text-muted-foreground hover:text-primary flex items-center gap-1 transition-colors",children:["Show all ",(0,te.jsx)(D.A,{className:"h-4 w-4"})]})]}),(0,te.jsx)(Z.hT,{media:C,isLoading:m,emptyMessage:null})]}),!m&&0===y.length&&(0,te.jsx)("section",{className:"text-center py-16",children:(0,te.jsxs)(z.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md mx-auto",children:[(0,te.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-6",children:(0,te.jsx)($.A,{className:"h-10 w-10 text-muted-foreground"})}),(0,te.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No media available yet"}),(0,te.jsx)("p",{className:"text-muted-foreground mb-6",children:s?"Start by uploading your first video or audio file to get started.":"Content is being prepared. Check back soon for amazing media!"}),s&&(0,te.jsx)(Y.$,{asChild:!0,size:"lg",children:(0,te.jsxs)(X.N_,{to:"/admin/upload",children:[(0,te.jsx)($.A,{className:"h-4 w-4 mr-2"}),"Upload Media"]})})]})}),j.length>0&&(0,te.jsxs)("section",{children:[(0,te.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,te.jsxs)("div",{className:"flex items-center gap-2",children:[(0,te.jsx)(F.A,{className:"h-5 w-5 text-muted-foreground"}),(0,te.jsx)("h2",{className:"text-2xl font-bold",children:r?"Browse All (".concat(r.toUpperCase(),")"):"Browse All"}),r&&(0,te.jsx)("button",{onClick:()=>o(null),className:"text-sm text-muted-foreground hover:text-primary ml-2",children:"Clear filter"})]})}),(0,te.jsx)(Z.hT,{media:j,isLoading:m})]})]})]})}},44919:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(21639).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},50797:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(21639).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}}]);
//# sourceMappingURL=762.f45c2a30.chunk.js.map