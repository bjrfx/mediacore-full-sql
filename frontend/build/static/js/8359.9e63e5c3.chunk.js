/*! For license information please see 8359.9e63e5c3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[8359],{18992:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(21639).A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},58359:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(27051),l=s(65043),n=s(81228),r=s(96938),o=s(21639);const i=(0,o.A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var d=s(36360),c=s(35613),x=s(64830),m=s(50516),h=s(18992),u=s(9855),w=s(7104);const j=(0,o.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),y=(0,o.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var f=s(99766),p=s(16347),v=s(18717),g=s(13390),N=s(45735),D=s(17484),k=s(82353),A=s(73216),b=s(70579);const C=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},S=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};function E(e){let{download:t,onPlay:s,onRemove:a,onRetry:l}=e;const{media:r,status:o,progress:w,size:j,downloadedAt:y,error:v}=t,k="video"===(null===r||void 0===r?void 0:r.type);return(0,b.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:(0,f.cn)("flex items-center gap-4 p-4 rounded-lg bg-card hover:bg-card/80 transition-colors group",o===p.DownloadStatus.FAILED&&"border border-red-500/20"),children:[(0,b.jsxs)("div",{className:(0,f.cn)("relative w-16 h-16 rounded-md overflow-hidden shrink-0 cursor-pointer",o===p.DownloadStatus.COMPLETED&&"group-hover:ring-2 ring-primary"),onClick:()=>o===p.DownloadStatus.COMPLETED&&s(r),children:[null!==r&&void 0!==r&&r.thumbnail?(0,b.jsx)("img",{src:r.thumbnail,alt:r.title,className:"w-full h-full object-cover"}):(0,b.jsx)(N.X1,{title:(null===r||void 0===r?void 0:r.title)||"Unknown",id:(null===r||void 0===r?void 0:r.id)||"0",isVideo:k,size:"small"}),o===p.DownloadStatus.COMPLETED&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(x.A,{className:"w-6 h-6 text-white",fill:"white"})}),o===p.DownloadStatus.DOWNLOADING&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"relative w-10 h-10",children:[(0,b.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,b.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-white/20"}),(0,b.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"".concat(.88*w," 88"),strokeLinecap:"round",className:"text-primary transition-all duration-300"})]}),(0,b.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:[w,"%"]})]})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-medium truncate",children:(null===r||void 0===r?void 0:r.title)||"Unknown"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(()=>{switch(o){case p.DownloadStatus.COMPLETED:return(0,b.jsx)(i,{className:"w-4 h-4 text-green-500"});case p.DownloadStatus.DOWNLOADING:return(0,b.jsx)(d.A,{className:"w-4 h-4 text-primary animate-spin"});case p.DownloadStatus.FAILED:return(0,b.jsx)(c.A,{className:"w-4 h-4 text-red-500"});default:return null}})(),(0,b.jsx)("span",{children:(()=>{switch(o){case p.DownloadStatus.COMPLETED:return"Downloaded ".concat(S(y));case p.DownloadStatus.DOWNLOADING:return"Downloading ".concat(w,"%");case p.DownloadStatus.FAILED:return v||"Download failed";default:return"Pending"}})()}),j>0&&o===p.DownloadStatus.COMPLETED&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"\u2022"}),(0,b.jsx)("span",{children:C(j)})]})]}),(null===r||void 0===r?void 0:r.artist)&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:r.artist})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[o===p.DownloadStatus.COMPLETED&&(0,b.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>s(r),className:"text-primary hover:text-primary",children:(0,b.jsx)(x.A,{className:"w-5 h-5",fill:"currentColor"})}),o===p.DownloadStatus.FAILED&&(0,b.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>l(r.id),className:"text-yellow-500 hover:text-yellow-400",children:(0,b.jsx)(m.A,{className:"w-5 h-5"})}),(0,b.jsxs)(D.rI,{children:[(0,b.jsx)(D.ty,{asChild:!0,children:(0,b.jsx)(g.$,{variant:"ghost",size:"icon",children:(0,b.jsx)(h.A,{className:"w-5 h-5"})})}),(0,b.jsxs)(D.SQ,{align:"end",children:[o===p.DownloadStatus.COMPLETED&&(0,b.jsxs)(D._2,{onClick:()=>s(r),children:[(0,b.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Play"]}),o===p.DownloadStatus.FAILED&&(0,b.jsxs)(D._2,{onClick:()=>l(r.id),children:[(0,b.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Retry Download"]}),(0,b.jsxs)(D._2,{onClick:()=>a(r.id),className:"text-red-500 focus:text-red-500",children:[(0,b.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})]})]})}function L(){const{user:e}=(0,v.nc)(),{downloads:t,removeDownload:s,retryDownload:o,clearAllDownloads:i,getTotalDownloadSize:x}=(0,p.default)(),{playTrack:m,getDownloadedUrl:h,isDownloaded:f}=p.default.getState(),{playTrack:N}=(0,v.ut)(),[D,S]=(0,l.useState)(!1);if(!e)return(0,b.jsx)(A.C5,{to:"/login",replace:!0});const L=Object.values(t),O=L.filter(e=>e.status===p.DownloadStatus.COMPLETED),P=L.filter(e=>e.status===p.DownloadStatus.DOWNLOADING),M=L.filter(e=>e.status===p.DownloadStatus.FAILED),T=x(),I=async e=>{const t=await p.default.getState().getDownloadedUrl(e.id);N(t?(0,a.A)((0,a.A)({},e),{},{fileUrl:t,isOffline:!0}):e,null,!1)},R=e=>{s(e)},F=e=>{o(e)};return(0,b.jsxs)("div",{className:"min-h-full pb-32",children:[(0,b.jsx)("div",{className:"px-6 pt-6 pb-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,b.jsx)(w.A,{className:"w-8 h-8 text-primary"}),"Downloads"]}),(0,b.jsxs)("p",{className:"text-muted-foreground mt-1",children:[O.length," items \u2022 ",C(T)]})]}),L.length>0&&(0,b.jsxs)(g.$,{variant:"outline",onClick:()=>S(!0),className:"text-red-500 hover:text-red-400 hover:border-red-500/50",children:[(0,b.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),(P.length>0||M.length>0)&&(0,b.jsx)("div",{className:"px-6 pb-4",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[P.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 text-primary text-sm",children:[(0,b.jsx)(d.A,{className:"w-4 h-4 animate-spin"}),P.length," downloading"]}),M.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/10 text-red-500 text-sm",children:[(0,b.jsx)(c.A,{className:"w-4 h-4"}),M.length," failed"]})]})}),(0,b.jsx)("div",{className:"px-6",children:0===L.length?(0,b.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,b.jsx)(j,{className:"w-10 h-10 text-muted-foreground"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Downloads Yet"}),(0,b.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Download videos and audio to watch or listen offline. Look for the download button on any media item."})]}):(0,b.jsx)("div",{className:"space-y-2",children:(0,b.jsxs)(r.N,{mode:"popLayout",children:[P.map(e=>(0,b.jsx)(E,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id)),M.map(e=>(0,b.jsx)(E,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id)),O.map(e=>(0,b.jsx)(E,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id))]})})}),O.length>0&&(0,b.jsx)("div",{className:"px-6 mt-8",children:(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50 flex items-center gap-4",children:[(0,b.jsx)(y,{className:"w-8 h-8 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Storage Used"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[C(T)," used for offline content"]})]})]})}),(0,b.jsx)(k.Lt,{open:D,onOpenChange:S,children:(0,b.jsxs)(k.EO,{children:[(0,b.jsxs)(k.wd,{children:[(0,b.jsx)(k.r7,{children:"Clear All Downloads?"}),(0,b.jsxs)(k.$v,{children:["This will remove all downloaded content (",C(T),"). You can always download them again later."]})]}),(0,b.jsxs)(k.ck,{children:[(0,b.jsx)(k.Zr,{children:"Cancel"}),(0,b.jsx)(k.Rx,{onClick:()=>{i(),S(!1)},className:"bg-red-500 hover:bg-red-600",children:"Clear All"})]})]})})]})}}}]);
//# sourceMappingURL=8359.9e63e5c3.chunk.js.map