/*! For license information please see 784.f4a253d6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[784],{31555:(e,s,t)=>{t.d(s,{E:()=>n});var a=t(27051),r=t(53986),l=(t(65043),t(99766)),d=t(70579);const c=["className"];function n(e){let{className:s}=e,t=(0,r.A)(e,c);return(0,d.jsx)("div",(0,a.A)({className:(0,l.cn)("animate-pulse rounded-md bg-muted",s)},t))}},34537:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},50516:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},64784:(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t(65043),r=t(12265),l=t(81228),d=t(46963),c=t(21639);const n=(0,c.A)("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),i=(0,c.A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var m=t(63172),o=t(34537),x=t(50516),h=t(85692),u=t(75088),f=t(55731),p=t(9463),N=t(38326),j=t(66305),g=t(91140),v=t(13390),y=t(5949),b=t(31555),w=t(99766),A=t(70579);const k=e=>e>=200&&e<300?"bg-green-500":e>=300&&e<400?"bg-blue-500":e>=400&&e<500?"bg-yellow-500":e>=500?"bg-red-500":"bg-gray-500",C=e=>{switch(e){case"GET":return"bg-emerald-500/20 text-emerald-400";case"POST":return"bg-blue-500/20 text-blue-400";case"PUT":return"bg-amber-500/20 text-amber-400";case"DELETE":return"bg-red-500/20 text-red-400";case"PATCH":return"bg-purple-500/20 text-purple-400";default:return"bg-gray-500/20 text-gray-400"}},M=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"mobile":return d.A;case"tablet":return n;case"bot":return i;default:return m.A}},T=e=>{const s=new Date,t=new Date(e),a=Math.floor((s-t)/1e3);return a<60?"just now":a<3600?"".concat(Math.floor(a/60)," min ago"):a<86400?"".concat(Math.floor(a/3600)," hours ago"):"".concat(Math.floor(a/86400)," days ago")};function R(){const[e,s]=(0,a.useState)(0),{data:t,isLoading:d,refetch:c,isFetching:n}=(0,r.I)({queryKey:["admin","click-stream",e],queryFn:()=>j.ic.getClickStream(25,25*e),refetchInterval:1e4}),i=(null===t||void 0===t?void 0:t.data)||[],m=(null===t||void 0===t?void 0:t.total)||0,R=Math.ceil(m/25);return(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,A.jsx)(o.A,{className:"h-6 w-6 text-primary"}),"Click Stream"]}),(0,A.jsxs)("p",{className:"text-muted-foreground",children:["Real-time API request log \u2022 ",m.toLocaleString()," total requests"]})]}),(0,A.jsxs)(v.$,{variant:"outline",onClick:()=>c(),disabled:n,children:[(0,A.jsx)(x.A,{className:(0,w.cn)("h-4 w-4 mr-2",n&&"animate-spin")}),"Refresh"]})]}),(0,A.jsx)(g.Zp,{children:(0,A.jsx)(g.Wu,{className:"p-0",children:d?(0,A.jsx)("div",{className:"p-4 space-y-3",children:[...Array(10)].map((e,s)=>(0,A.jsx)(b.E,{className:"h-16 w-full"},s))}):(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"w-full",children:[(0,A.jsx)("thead",{className:"bg-muted/50",children:(0,A.jsxs)("tr",{className:"text-left text-sm text-muted-foreground",children:[(0,A.jsx)("th",{className:"p-4 font-medium",children:"Endpoint"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"Time"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"IP"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"Status"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"Browser"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"Location"}),(0,A.jsx)("th",{className:"p-4 font-medium",children:"Method"})]})}),(0,A.jsx)("tbody",{className:"divide-y divide-border",children:i.map((e,s)=>{const t=M(e.deviceType);return(0,A.jsxs)(l.P.tr,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.02*s},className:"hover:bg-muted/30 transition-colors",children:[(0,A.jsxs)("td",{className:"p-4",children:[(0,A.jsx)("div",{className:"flex items-center gap-2",children:(0,A.jsx)("code",{className:"text-sm font-mono text-primary",children:e.endpoint})}),e.referer&&(0,A.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[(0,A.jsx)(h.A,{className:"h-3 w-3"}),e.referer.substring(0,40),"..."]})]}),(0,A.jsxs)("td",{className:"p-4",children:[(0,A.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,A.jsx)(u.A,{className:"h-3 w-3 text-muted-foreground"}),T(e.timestamp)]}),(0,A.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[e.responseTime,"ms"]})]}),(0,A.jsx)("td",{className:"p-4",children:(0,A.jsx)("code",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:e.ipAddress})}),(0,A.jsx)("td",{className:"p-4",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("span",{className:(0,w.cn)("w-2 h-2 rounded-full",k(e.statusCode))}),(0,A.jsx)("span",{className:"text-sm font-medium",children:e.statusCode})]})}),(0,A.jsx)("td",{className:"p-4",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)(t,{className:"h-4 w-4 text-muted-foreground"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"text-sm",children:e.browser||"Unknown"}),(0,A.jsx)("div",{className:"text-xs text-muted-foreground",children:e.os})]})]})}),(0,A.jsx)("td",{className:"p-4",children:(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"text-sm",children:e.city||"Unknown"}),(0,A.jsx)("div",{className:"text-xs text-muted-foreground",children:e.country})]})]})}),(0,A.jsx)("td",{className:"p-4",children:(0,A.jsx)(y.E,{className:(0,w.cn)("font-mono text-xs",C(e.method)),children:e.method})})]},e.id)})})]})})})}),(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",25*e+1," - ",Math.min(25*(e+1),m)," of ",m]}),(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsxs)(v.$,{variant:"outline",size:"sm",onClick:()=>s(e=>Math.max(0,e-1)),disabled:0===e,children:[(0,A.jsx)(p.A,{className:"h-4 w-4"}),"Previous"]}),(0,A.jsxs)("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",e+1," of ",R||1]}),(0,A.jsxs)(v.$,{variant:"outline",size:"sm",onClick:()=>s(e=>e+1),disabled:e>=R-1,children:["Next",(0,A.jsx)(N.A,{className:"h-4 w-4"})]})]})]})]})}},91140:(e,s,t)=>{t.d(s,{BT:()=>N,Wu:()=>j,ZB:()=>p,Zp:()=>u,aR:()=>f});var a=t(27051),r=t(53986),l=t(65043),d=t(99766),c=t(70579);const n=["className"],i=["className"],m=["className","children"],o=["className"],x=["className"],h=["className"],u=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,n);return(0,c.jsx)("div",(0,a.A)({ref:s,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",t)},l))});u.displayName="Card";const f=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,i);return(0,c.jsx)("div",(0,a.A)({ref:s,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",t)},l))});f.displayName="CardHeader";const p=l.forwardRef((e,s)=>{let{className:t,children:l}=e,n=(0,r.A)(e,m);return(0,c.jsx)("h3",(0,a.A)((0,a.A)({ref:s,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",t)},n),{},{children:l}))});p.displayName="CardTitle";const N=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,o);return(0,c.jsx)("p",(0,a.A)({ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t)},l))});N.displayName="CardDescription";const j=l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,x);return(0,c.jsx)("div",(0,a.A)({ref:s,className:(0,d.cn)("p-6 pt-0",t)},l))});j.displayName="CardContent";l.forwardRef((e,s)=>{let{className:t}=e,l=(0,r.A)(e,h);return(0,c.jsx)("div",(0,a.A)({ref:s,className:(0,d.cn)("flex items-center p-6 pt-0",t)},l))}).displayName="CardFooter"}}]);
//# sourceMappingURL=784.f4a253d6.chunk.js.map