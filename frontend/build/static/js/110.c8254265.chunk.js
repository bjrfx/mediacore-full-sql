"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[110],{17110:(e,s,a)=>{a.r(s),a.d(s,{default:()=>W});var t=a(65043),l=a(12265),r=a(34537),i=a(67010),d=a(19742),n=a(14319),c=a(79978),o=a(55731),m=a(63172),x=a(46963),u=a(44919),h=a(7118),p=a(20073),f=a(66305),j=a(91140),N=a(31555),g=a(84370),y=a(99766),v=a(86150),b=a(50108),w=a(17869),A=a(4240),q=a(87734),R=a(13839),C=a(52185),Z=a(6026),T=a(60163),L=a(877),B=a(70579);const k=["#1DB954","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],E=e=>{let{title:s,value:a,subtitle:t,icon:l,color:r,trend:i,isLoading:d}=e;return(0,B.jsx)(j.Zp,{children:(0,B.jsx)(j.Wu,{className:"p-4",children:d?(0,B.jsx)(N.E,{className:"h-20"}):(0,B.jsxs)("div",{className:"flex items-start justify-between",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:s}),(0,B.jsx)("p",{className:"text-2xl font-bold",children:a}),t&&(0,B.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:t})]}),(0,B.jsx)("div",{className:(0,y.cn)("p-2 rounded-lg",r),children:(0,B.jsx)(l,{className:"h-5 w-5"})})]})})})},S=e=>{let{value:s,max:a,color:t="bg-primary"}=e;return(0,B.jsx)("div",{className:"flex-1 bg-muted rounded-full h-2 overflow-hidden",children:(0,B.jsx)("div",{className:(0,y.cn)("h-full rounded-full transition-all",t),style:{width:"".concat(Math.min(s/a*100,100),"%")}})})},K=e=>{let{label:s,value:a,max:t,color:l}=e;return(0,B.jsxs)("div",{className:"flex items-center gap-3 py-2",children:[(0,B.jsx)("span",{className:"text-sm min-w-[120px] truncate",children:s}),(0,B.jsx)(S,{value:a,max:t,color:l}),(0,B.jsx)("span",{className:"text-sm font-medium text-muted-foreground min-w-[50px] text-right",children:(0,y.ZV)(a)})]})};function W(){var e,s,a,S,W,F,M,D,I,V;const[O,U]=(0,t.useState)("30"),z=parseInt(O),{data:P,isLoading:J}=(0,l.I)({queryKey:["admin","dashboard"],queryFn:()=>f.ic.getDashboard(),refetchInterval:3e4}),{data:G,isLoading:H}=(0,l.I)({queryKey:["admin","analytics","geographic",z],queryFn:()=>f.ic.getGeographicStats(z)}),{data:_,isLoading:Q}=(0,l.I)({queryKey:["admin","analytics","devices",z],queryFn:()=>f.ic.getDeviceStats(z)}),{data:Y,isLoading:X}=(0,l.I)({queryKey:["admin","analytics","referrers",z],queryFn:()=>f.ic.getReferrerStats(z)}),{data:$,isLoading:ee}=(0,l.I)({queryKey:["admin","analytics","hourly"],queryFn:()=>f.ic.getHourlyStats()}),{data:se}=(0,l.I)({queryKey:["admin","api-keys"],queryFn:()=>f.ic.getApiKeys()}),ae=(null===P||void 0===P?void 0:P.data)||{},te=ae.overview||{},le=ae.charts||{},re=(null===G||void 0===G?void 0:G.data)||{},ie=(null===_||void 0===_?void 0:_.data)||{},de=(null===Y||void 0===Y?void 0:Y.data)||[],ne=(null===$||void 0===$?void 0:$.data)||[],ce=(null===se||void 0===se?void 0:se.data)||[],oe=te.totalRequests||ce.reduce((e,s)=>e+(s.usageCount||0),0),me=Math.max(...(null===(e=re.topCountries)||void 0===e?void 0:e.map(e=>e.requests))||[1]),xe=Math.max(...(null===(s=re.topCities)||void 0===s?void 0:s.map(e=>e.requests))||[1]),ue=Math.max(...(null===(a=ie.topBrowsers)||void 0===a?void 0:a.map(e=>e.requests))||[1]),he=Math.max(...(null===(S=ie.topOS)||void 0===S?void 0:S.map(e=>e.requests))||[1]),pe=Math.max(...de.map(e=>e.requests)||[1]),fe=J;return(0,B.jsxs)("div",{className:"space-y-6",children:[(0,B.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,B.jsx)(d.A,{className:"h-6 w-6 text-primary"}),"Domain Statistics"]}),(0,B.jsx)("p",{className:"text-muted-foreground",children:"Metrics evolution over time"})]}),(0,B.jsxs)(g.l6,{value:O,onValueChange:U,children:[(0,B.jsx)(g.bq,{className:"w-40",children:(0,B.jsx)(g.yv,{})}),(0,B.jsxs)(g.gC,{children:[(0,B.jsx)(g.eb,{value:"7",children:"Last 7 days"}),(0,B.jsx)(g.eb,{value:"30",children:"Last 30 days"}),(0,B.jsx)(g.eb,{value:"90",children:"Last 90 days"})]})]})]}),(0,B.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,B.jsx)(E,{title:"Total Requests",value:(0,y.ZV)(oe),subtitle:"vs last ".concat(z," days"),icon:r.A,color:"bg-blue-500/10 text-blue-500",isLoading:fe}),(0,B.jsx)(E,{title:"Active Keys",value:te.activeApiKeys||ce.length,icon:p.A,color:"bg-green-500/10 text-green-500",isLoading:fe}),(0,B.jsx)(E,{title:"Success Rate",value:"".concat(te.successRate||100,"%"),icon:n.A,color:"bg-emerald-500/10 text-emerald-500",isLoading:fe}),(0,B.jsx)(E,{title:"Total Media",value:te.totalMedia||0,icon:m.A,color:"bg-purple-500/10 text-purple-500",isLoading:fe}),(0,B.jsx)(E,{title:"Total Users",value:te.totalUsers||0,icon:h.A,color:"bg-orange-500/10 text-orange-500",isLoading:fe}),(0,B.jsx)(E,{title:"Today's Requests",value:(0,y.ZV)(ne.reduce((e,s)=>e+s.requests,0)),icon:u.A,color:"bg-cyan-500/10 text-cyan-500",isLoading:ee})]}),(0,B.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(j.ZB,{className:"text-base",children:"Top Endpoints"}),(0,B.jsxs)(g.l6,{defaultValue:"endpoints",children:[(0,B.jsx)(g.bq,{className:"w-32 h-8 text-xs",children:(0,B.jsx)(g.yv,{})}),(0,B.jsx)(g.gC,{children:(0,B.jsx)(g.eb,{value:"endpoints",children:"Top endpoints"})})]})]})}),(0,B.jsx)(j.Wu,{children:J?(0,B.jsx)(N.E,{className:"h-64"}):(null===(W=le.topEndpoints)||void 0===W?void 0:W.length)>0?(0,B.jsxs)("div",{className:"flex items-center",children:[(0,B.jsx)(b.u,{width:"50%",height:200,children:(0,B.jsxs)(T.r,{children:[(0,B.jsx)(A.F,{data:le.topEndpoints.slice(0,5),cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,dataKey:"requests",nameKey:"endpoint",children:le.topEndpoints.slice(0,5).map((e,s)=>(0,B.jsx)(w.f,{fill:k[s%k.length]},"cell-".concat(s)))}),(0,B.jsxs)("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",children:[(0,B.jsx)("tspan",{x:"50%",dy:"-0.5em",className:"fill-foreground text-xl font-bold",children:(0,y.ZV)(le.topEndpoints.reduce((e,s)=>e+s.requests,0))}),(0,B.jsx)("tspan",{x:"50%",dy:"1.5em",className:"fill-muted-foreground text-xs",children:"Requests"})]})]})}),(0,B.jsx)("div",{className:"flex-1 space-y-2",children:le.topEndpoints.slice(0,5).map((e,s)=>(0,B.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,B.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k[s%k.length]}}),(0,B.jsx)("span",{className:"truncate flex-1",children:e.endpoint}),(0,B.jsx)("span",{className:"font-medium",children:(0,y.ZV)(e.requests)})]},e.endpoint))})]}):(0,B.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data available"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsx)(j.ZB,{className:"text-base",children:"Today's Activity"})}),(0,B.jsx)(j.Wu,{children:ee?(0,B.jsx)(N.E,{className:"h-64"}):ne.length>0?(0,B.jsx)(b.u,{width:"100%",height:200,children:(0,B.jsxs)(L.Q,{data:ne,children:[(0,B.jsx)(q.d,{strokeDasharray:"3 3",stroke:"#333"}),(0,B.jsx)(C.W,{dataKey:"label",stroke:"#888",fontSize:10,interval:3}),(0,B.jsx)(Z.h,{stroke:"#888",fontSize:10}),(0,B.jsx)(v.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"}}),(0,B.jsx)(R.G,{type:"monotone",dataKey:"requests",stroke:"#1DB954",fill:"#1DB954",fillOpacity:.2,strokeWidth:2})]})}):(0,B.jsx)("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:"No data for today yet"})})]})]}),(0,B.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(j.ZB,{className:"text-base flex items-center gap-2",children:[(0,B.jsx)(o.A,{className:"h-4 w-4"}),"Top Countries"]}),(0,B.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]})}),(0,B.jsx)(j.Wu,{children:H?(0,B.jsx)(N.E,{className:"h-48"}):(null===(F=re.topCountries)||void 0===F?void 0:F.length)>0?(0,B.jsx)("div",{className:"space-y-1",children:re.topCountries.slice(0,6).map((e,s)=>(0,B.jsx)(K,{label:e.country,value:e.requests,max:me,color:"bg-primary/80"},e.country))}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No geographic data yet"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(j.ZB,{className:"text-base",children:"Top Cities"}),(0,B.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]})}),(0,B.jsx)(j.Wu,{children:H?(0,B.jsx)(N.E,{className:"h-48"}):(null===(M=re.topCities)||void 0===M?void 0:M.length)>0?(0,B.jsx)("div",{className:"space-y-1",children:re.topCities.slice(0,6).map(e=>(0,B.jsx)(K,{label:e.city,value:e.requests,max:xe,color:"bg-blue-500"},e.city))}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No geographic data yet"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(j.ZB,{className:"text-base",children:"Top Referrers"}),(0,B.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]})}),(0,B.jsx)(j.Wu,{children:X?(0,B.jsx)(N.E,{className:"h-48"}):de.length>0?(0,B.jsx)("div",{className:"space-y-1",children:de.slice(0,6).map(e=>(0,B.jsx)(K,{label:e.referrer,value:e.requests,max:pe,color:"bg-amber-500"},e.referrer))}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No referrer data yet"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(j.ZB,{className:"text-base flex items-center gap-2",children:[(0,B.jsx)(c.A,{className:"h-4 w-4"}),"Top Browsers"]}),(0,B.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]})}),(0,B.jsx)(j.Wu,{children:Q?(0,B.jsx)(N.E,{className:"h-48"}):(null===(D=ie.topBrowsers)||void 0===D?void 0:D.length)>0?(0,B.jsx)("div",{className:"space-y-1",children:ie.topBrowsers.slice(0,6).map(e=>(0,B.jsx)(K,{label:e.browser,value:e.requests,max:ue,color:"bg-purple-500"},e.browser))}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No browser data yet"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(j.ZB,{className:"text-base flex items-center gap-2",children:[(0,B.jsx)(m.A,{className:"h-4 w-4"}),"Top Operating Systems"]}),(0,B.jsx)(i.A,{className:"h-4 w-4 text-muted-foreground cursor-pointer hover:text-foreground"})]})}),(0,B.jsx)(j.Wu,{children:Q?(0,B.jsx)(N.E,{className:"h-48"}):(null===(I=ie.topOS)||void 0===I?void 0:I.length)>0?(0,B.jsx)("div",{className:"space-y-1",children:ie.topOS.slice(0,6).map(e=>(0,B.jsx)(K,{label:e.os,value:e.requests,max:he,color:"bg-cyan-500"},e.os))}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No OS data yet"})})]}),(0,B.jsxs)(j.Zp,{children:[(0,B.jsx)(j.aR,{className:"pb-2",children:(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)(j.ZB,{className:"text-base flex items-center gap-2",children:[(0,B.jsx)(x.A,{className:"h-4 w-4"}),"Device Types"]})})}),(0,B.jsx)(j.Wu,{children:Q?(0,B.jsx)(N.E,{className:"h-48"}):(null===(V=ie.deviceTypes)||void 0===V?void 0:V.length)>0?(0,B.jsx)(b.u,{width:"100%",height:180,children:(0,B.jsxs)(T.r,{children:[(0,B.jsx)(A.F,{data:ie.deviceTypes,cx:"50%",cy:"50%",innerRadius:40,outerRadius:70,dataKey:"requests",nameKey:"deviceType",label:e=>{let{deviceType:s,percent:a}=e;return"".concat(s," ").concat((100*a).toFixed(0),"%")},labelLine:!1,children:ie.deviceTypes.map((e,s)=>(0,B.jsx)(w.f,{fill:k[s%k.length]},"cell-".concat(s)))}),(0,B.jsx)(v.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"8px"}})]})}):(0,B.jsx)("div",{className:"h-48 flex items-center justify-center text-muted-foreground text-sm",children:"No device data yet"})})]})]})]})}},31555:(e,s,a)=>{a.d(s,{E:()=>n});var t=a(27051),l=a(53986),r=(a(65043),a(99766)),i=a(70579);const d=["className"];function n(e){let{className:s}=e,a=(0,l.A)(e,d);return(0,i.jsx)("div",(0,t.A)({className:(0,r.cn)("animate-pulse rounded-md bg-muted",s)},a))}},84370:(e,s,a)=>{a.d(s,{bq:()=>v,eb:()=>q,gC:()=>A,l6:()=>g,yv:()=>y});var t=a(27051),l=a(53986),r=a(65043),i=a(22095),d=a(36210),n=a(92382),c=a(15711),o=a(99766),m=a(70579);const x=["className","children"],u=["className"],h=["className"],p=["className","children","position"],f=["className"],j=["className","children"],N=["className"],g=i.bL,y=(i.YJ,i.WT),v=r.forwardRef((e,s)=>{let{className:a,children:r}=e,d=(0,l.A)(e,x);return(0,m.jsxs)(i.l9,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},d),{},{children:[r,(0,m.jsx)(i.In,{asChild:!0,children:(0,m.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}))});v.displayName=i.l9.displayName;const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,m.jsx)(i.PP,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});b.displayName=i.PP.displayName;const w=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,h);return(0,m.jsx)(i.wn,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(n.A,{className:"h-4 w-4"})}))});w.displayName=i.wn.displayName;const A=r.forwardRef((e,s)=>{let{className:a,children:r,position:d="popper"}=e,n=(0,l.A)(e,p);return(0,m.jsx)(i.ZL,{children:(0,m.jsxs)(i.UC,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d},n),{},{children:[(0,m.jsx)(b,{}),(0,m.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,m.jsx)(w,{})]}))})});A.displayName=i.UC.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,f);return(0,m.jsx)(i.JU,(0,t.A)({ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},r))}).displayName=i.JU.displayName;const q=r.forwardRef((e,s)=>{let{className:a,children:r}=e,n=(0,l.A)(e,j);return(0,m.jsxs)(i.q7,(0,t.A)((0,t.A)({ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},n),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(i.VF,{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})})}),(0,m.jsx)(i.p4,{children:r})]}))});q.displayName=i.q7.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,N);return(0,m.jsx)(i.wv,(0,t.A)({ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=i.wv.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>j,Wu:()=>N,ZB:()=>f,Zp:()=>h,aR:()=>p});var t=a(27051),l=a(53986),r=a(65043),i=a(99766),d=a(70579);const n=["className"],c=["className"],o=["className","children"],m=["className"],x=["className"],u=["className"],h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,n);return(0,d.jsx)("div",(0,t.A)({ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},r))});h.displayName="Card";const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,c);return(0,d.jsx)("div",(0,t.A)({ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a)},r))});p.displayName="CardHeader";const f=r.forwardRef((e,s)=>{let{className:a,children:r}=e,n=(0,l.A)(e,o);return(0,d.jsx)("h3",(0,t.A)((0,t.A)({ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a)},n),{},{children:r}))});f.displayName="CardTitle";const j=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,m);return(0,d.jsx)("p",(0,t.A)({ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a)},r))});j.displayName="CardDescription";const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,x);return(0,d.jsx)("div",(0,t.A)({ref:s,className:(0,i.cn)("p-6 pt-0",a)},r))});N.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,l.A)(e,u);return(0,d.jsx)("div",(0,t.A)({ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a)},r))}).displayName="CardFooter"}}]);
//# sourceMappingURL=110.c8254265.chunk.js.map