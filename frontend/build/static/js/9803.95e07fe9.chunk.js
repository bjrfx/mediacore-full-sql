"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[9803],{13416:(e,s,a)=>{a.d(s,{T:()=>c});var l=a(27051),t=a(53986),i=a(65043),r=a(99766),n=a(70579);const d=["className"],c=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,d);return(0,n.jsx)("textarea",(0,l.A)({className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s},i))});c.displayName="Textarea"},19690:(e,s,a)=>{a.d(s,{Xi:()=>h,av:()=>p,j7:()=>x,tU:()=>u});var l=a(27051),t=a(53986),i=a(65043),r=a(47127),n=a(99766),d=a(70579);const c=["className"],o=["className"],m=["className"],u=r.bL,x=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,c);return(0,d.jsx)(r.B8,(0,l.A)({ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a)},i))});x.displayName=r.B8.displayName;const h=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,o);return(0,d.jsx)(r.l9,(0,l.A)({ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a)},i))});h.displayName=r.l9.displayName;const p=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,m);return(0,d.jsx)(r.UC,(0,l.A)({ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},i))});p.displayName=r.UC.displayName},31555:(e,s,a)=>{a.d(s,{E:()=>d});var l=a(27051),t=a(53986),i=(a(65043),a(99766)),r=a(70579);const n=["className"];function d(e){let{className:s}=e,a=(0,t.A)(e,n);return(0,r.jsx)("div",(0,l.A)({className:(0,i.cn)("animate-pulse rounded-md bg-muted",s)},a))}},49803:(e,s,a)=>{a.r(s),a.d(s,{default:()=>ae});var l=a(27051),t=a(65043),i=a(73216),r=a(35475),n=a(63248),d=a(12265),c=a(47097),o=a(14459),m=a(65469),u=a(48186),x=a(64265),h=a(70764),p=a(9855),g=a(71360),j=a(29521),v=a(19829),f=a(64830),b=a(36360),N=a(94965),y=a(57170),A=a(41680),w=a(70067),C=a(40614),k=a(36210),S=a(84259),I=a(38276),T=a(94505),E=a(18717),F=a(91140),L=a(92264),D=a(13390),$=a(5949),R=a(20556),J=a(13416),O=a(31555),z=a(65598),q=a(17484),M=a(84370),Q=a(19690),B=a(65005),P=a(9333),U=a(16784),_=a(73002),G=a(39292),Z=a(79722),W=a(99766),V=a(70579);const K="https://mediacoreapi-sql.masakalirestrobar.ca",X=e=>{switch(e){case"video":return P.A;case"audio":return v.A;case"image":return w.A;case"subtitle":return A.A;case"folder":return U.A;default:return _.A}},H=e=>{if(!e)return"0 B";const s=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,s)).toFixed(1)," ").concat(["B","KB","MB","GB"][s])};function Y(e){let{open:s,onOpenChange:a,onSelect:l,multiSelect:i=!0,allowedTypes:r=null,title:n="Select Files",description:c="Choose files from your file manager"}=e;const[o,m]=(0,t.useState)(""),[u,x]=(0,t.useState)("all"),[h,p]=(0,t.useState)(""),[g,j]=(0,t.useState)([]),{data:v,isLoading:f}=(0,d.I)({queryKey:["file-picker",o,u],queryFn:async()=>{const e=localStorage.getItem("accessToken");return(await Z.A.get("".concat(K,"/api/files"),{params:{dir:o,type:u},headers:{Authorization:"Bearer ".concat(e)}})).data},enabled:s}),N=((null===v||void 0===v?void 0:v.data)||[]).filter(e=>!!e.isDirectory||(!(r&&r.length>0)||r.includes(e.type))).filter(e=>!h||e.name.toLowerCase().includes(h.toLowerCase())),y=e=>{e.isDirectory?m(e.path):j(i?s=>s.find(s=>s.id===e.id)?s.filter(s=>s.id!==e.id):[...s,e]:[e])},A=o?o.split("/").filter(Boolean):[];return(0,V.jsx)(z.lG,{open:s,onOpenChange:a,children:(0,V.jsxs)(z.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,V.jsxs)(z.c7,{children:[(0,V.jsx)(z.L3,{children:n}),(0,V.jsx)(z.rr,{children:c})]}),(0,V.jsxs)("div",{className:"flex gap-3",children:[(0,V.jsxs)("div",{className:"relative flex-1",children:[(0,V.jsx)(G.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,V.jsx)(L.p,{placeholder:"Search files...",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]}),(0,V.jsxs)(M.l6,{value:u,onValueChange:x,children:[(0,V.jsx)(M.bq,{className:"w-[150px]",children:(0,V.jsx)(M.yv,{})}),(0,V.jsxs)(M.gC,{children:[(0,V.jsx)(M.eb,{value:"all",children:"All Types"}),(0,V.jsx)(M.eb,{value:"video",children:"Videos"}),(0,V.jsx)(M.eb,{value:"audio",children:"Audio"}),(0,V.jsx)(M.eb,{value:"subtitle",children:"Subtitles"}),(0,V.jsx)(M.eb,{value:"image",children:"Images"}),(0,V.jsx)(M.eb,{value:"hls",children:"HLS"})]})]})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,V.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>m(""),className:(0,W.cn)(!o&&"font-semibold"),children:"Root"}),A.map((e,s)=>(0,V.jsxs)(t.Fragment,{children:[(0,V.jsx)("span",{className:"text-muted-foreground",children:"/"}),(0,V.jsx)(D.$,{variant:"ghost",size:"sm",onClick:()=>m(A.slice(0,s+1).join("/")),className:(0,W.cn)(s===A.length-1&&"font-semibold"),children:e})]},s))]}),g.length>0&&(0,V.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-primary/10 rounded-lg",children:[(0,V.jsx)(k.A,{className:"h-4 w-4 text-primary"}),(0,V.jsxs)("span",{className:"text-sm font-medium",children:[g.length," file",g.length>1?"s":""," selected"]})]}),(0,V.jsx)("div",{className:"border rounded-lg max-h-[400px] overflow-y-auto",children:f?(0,V.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,V.jsx)(b.A,{className:"h-8 w-8 animate-spin text-primary"})}):0===N.length?(0,V.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[(0,V.jsx)(U.A,{className:"h-12 w-12 text-muted-foreground mb-2"}),(0,V.jsx)("p",{className:"text-sm text-muted-foreground",children:h?"No files found":"This folder is empty"})]}):(0,V.jsx)("div",{className:"p-4 space-y-2",children:N.map(e=>{const s=X(e.type),a=g.find(s=>s.id===e.id);return(0,V.jsxs)("div",{className:(0,W.cn)("flex items-center gap-3 p-3 rounded-lg border cursor-pointer hover:border-primary/50 transition-colors",a&&"border-primary bg-primary/5"),onClick:()=>y(e),children:[!e.isDirectory&&(0,V.jsx)(B.S,{checked:!!a,onCheckedChange:()=>y(e),onClick:e=>e.stopPropagation()}),(0,V.jsx)(s,{className:(0,W.cn)("h-5 w-5","video"===e.type&&"text-blue-500","audio"===e.type&&"text-purple-500","image"===e.type&&"text-green-500","subtitle"===e.type&&"text-orange-500","folder"===e.type&&"text-yellow-500")}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,V.jsx)("p",{className:"text-xs text-muted-foreground",children:e.isDirectory?"".concat(e.itemCount||0," items"):H(e.size)})]}),(0,V.jsx)($.E,{variant:"secondary",className:"text-xs",children:e.type})]},e.id)})})}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>{j([]),m(""),p(""),a(!1)},children:"Cancel"}),(0,V.jsxs)(D.$,{onClick:()=>{l(g),j([]),m(""),p("")},disabled:0===g.length,children:["Select ",g.length>0&&"(".concat(g.length,")")]})]})]})})}const ee="https://mediacoreapi-sql.masakalirestrobar.ca",se=[{value:"album",label:"Album"},{value:"single",label:"Single"},{value:"ep",label:"EP"},{value:"compilation",label:"Compilation"},{value:"audiobook",label:"Audiobook"},{value:"lecture",label:"Lecture Series"}];function ae(){const{artistId:e}=(0,i.g)(),s=(0,i.Zp)(),a=(0,n.jE)(),{addToast:S}=(0,E.j_)(),{playTrack:I,setQueue:P}=(0,E.ut)(),[U,_]=(0,t.useState)("albums"),[G,K]=(0,t.useState)(!1),[X,H]=(0,t.useState)(!1),[ae,te]=(0,t.useState)(!1),[ie,re]=(0,t.useState)(!1),[ne,de]=(0,t.useState)(!1),[ce,oe]=(0,t.useState)(!1),[me,ue]=(0,t.useState)(!1),[xe,he]=(0,t.useState)(null),[pe,ge]=(0,t.useState)([]),[je,ve]=(0,t.useState)("existing"),[fe,be]=(0,t.useState)([]),[Ne,ye]=(0,t.useState)({}),[Ae,we]=(0,t.useState)(!1),[Ce,ke]=(0,t.useState)({title:"",description:"",coverImage:"",releaseDate:"",genre:"",type:"album"}),[Se,Ie]=(0,t.useState)({name:"",bio:"",genre:"",image:"",website:""}),{data:Te,isLoading:Ee}=(0,d.I)({queryKey:["artist",e],queryFn:()=>T.O0.getArtistById(e),enabled:!!e}),{data:Fe,isLoading:Le}=(0,d.I)({queryKey:["artist-albums",e],queryFn:()=>T.O0.getArtistAlbums(e),enabled:!!e}),{data:De,isLoading:$e}=(0,d.I)({queryKey:["artist-media",e],queryFn:()=>T.O0.getArtistMedia(e),enabled:!!e}),{data:Re}=(0,d.I)({queryKey:["admin-media"],queryFn:()=>T.O0.getMedia({limit:500})}),Je=null===Te||void 0===Te?void 0:Te.data,Oe=(0,t.useMemo)(()=>(null===Fe||void 0===Fe?void 0:Fe.data)||[],[null===Fe||void 0===Fe?void 0:Fe.data]),ze=(0,t.useMemo)(()=>(null===De||void 0===De?void 0:De.data)||[],[null===De||void 0===De?void 0:De.data]),qe=(0,t.useMemo)(()=>(null===Re||void 0===Re?void 0:Re.data)||[],[null===Re||void 0===Re?void 0:Re.data]),[Me,Qe]=(0,t.useState)({}),Be=(0,t.useMemo)(()=>{const e=new Set;return Oe.forEach(s=>{(Me[s.id]||[]).forEach(s=>e.add(s.id))}),qe.filter(s=>!e.has(s.id))},[qe,Oe,Me]),Pe=async e=>{if(Me[e])return Me[e];try{const s=await T.O0.getAlbumMedia(e),a=(null===s||void 0===s?void 0:s.data)||[];return Qe(s=>(0,l.A)((0,l.A)({},s),{},{[e]:a})),a}catch(s){return console.error("Failed to fetch album tracks:",s),[]}},Ue=(0,c.n)({mutationFn:s=>T.ic.createAlbum((0,l.A)((0,l.A)({},s),{},{artistId:e})),onSuccess:()=>{a.invalidateQueries(["artist-albums",e]),K(!1),ke({title:"",description:"",coverImage:"",releaseDate:"",genre:"",type:"album"}),S({message:"Album created successfully",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to create album",type:"error"})}}),_e=(0,c.n)({mutationFn:e=>{let{id:s,data:a}=e;return T.ic.updateAlbum(s,a)},onSuccess:()=>{a.invalidateQueries(["artist-albums",e]),H(!1),he(null),S({message:"Album updated successfully",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update album",type:"error"})}}),Ge=(0,c.n)({mutationFn:e=>T.ic.deleteAlbum(e),onSuccess:()=>{a.invalidateQueries(["artist-albums",e]),a.invalidateQueries(["artist-media",e]),te(!1),he(null),S({message:"Album deleted successfully",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete album",type:"error"})}}),Ze=(0,c.n)({mutationFn:s=>T.ic.updateArtist(e,s),onSuccess:()=>{a.invalidateQueries(["artist",e]),a.invalidateQueries(["artists"]),oe(!1),S({message:"Artist updated successfully",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update artist",type:"error"})}}),We=(0,c.n)({mutationFn:()=>T.ic.deleteArtist(e,!0),onSuccess:()=>{a.invalidateQueries(["artists"]),s("/admin/artists"),S({message:"Artist deleted successfully",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete artist",type:"error"})}}),Ve=(0,c.n)({mutationFn:e=>{let{albumId:s,mediaId:a,trackNumber:l}=e;return T.ic.addMediaToAlbum(s,a,l)},onSuccess:(s,t)=>{a.invalidateQueries(["album-media",t.albumId]),a.invalidateQueries(["artist-media",e]),Qe(e=>{const s=(0,l.A)({},e);return delete s[t.albumId],s})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to add track",type:"error"})}}),Ke=(0,c.n)({mutationFn:e=>{let{albumId:s,mediaId:a}=e;return T.ic.removeMediaFromAlbum(s,a)},onSuccess:(s,t)=>{a.invalidateQueries(["album-media",t.albumId]),a.invalidateQueries(["artist-media",e]),Qe(e=>{const s=(0,l.A)({},e);return delete s[t.albumId],s}),S({message:"Track removed from album",type:"success"})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to remove track",type:"error"})}}),Xe=(0,c.n)({mutationFn:e=>{let{albumId:s,tracks:a}=e;return T.ic.reorderAlbumTracks(s,a)},onSuccess:(e,s)=>{Qe(e=>{const a=(0,l.A)({},e);return delete a[s.albumId],a})},onError:e=>{var s,a;S({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to reorder tracks",type:"error"})}});if(Ee)return(0,V.jsx)("div",{className:"space-y-6",children:(0,V.jsxs)("div",{className:"flex items-start gap-4",children:[(0,V.jsx)(O.E,{className:"h-10 w-10"}),(0,V.jsxs)("div",{className:"flex-1 flex gap-6",children:[(0,V.jsx)(O.E,{className:"w-48 h-48 rounded-xl"}),(0,V.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,V.jsx)(O.E,{className:"h-10 w-64"}),(0,V.jsx)(O.E,{className:"h-6 w-32"}),(0,V.jsx)(O.E,{className:"h-20 w-full max-w-xl"})]})]})]})});if(!Je)return(0,V.jsxs)("div",{className:"text-center py-12",children:[(0,V.jsx)(o.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,V.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Artist not found"}),(0,V.jsx)(D.$,{asChild:!0,children:(0,V.jsx)(r.N_,{to:"/admin/artists",children:"Back to Artists"})})]});const He=()=>{ke({title:"",description:"",coverImage:"",releaseDate:"",genre:Je.genre||"",type:"album"}),K(!0)},Ye=e=>{var s;he(e),ke({title:e.title,description:e.description||"",coverImage:e.coverImage||"",releaseDate:(null===(s=e.releaseDate)||void 0===s?void 0:s.split("T")[0])||"",genre:e.genre||"",type:e.type||"album"}),H(!0)},es=e=>{he(e),te(!0)},ss=e=>{he(e),ge([]),re(!0)},as=e=>{ge(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},ls=async(e,s,a)=>{if(!e.destination)return;const t=Array.from(a),[i]=t.splice(e.source.index,1);t.splice(e.destination.index,0,i),Qe(e=>(0,l.A)((0,l.A)({},e),{},{[s]:t}));const r=t.map((e,s)=>({mediaId:e.id,trackNumber:s+1}));await Xe.mutateAsync({albumId:s,tracks:r})},ts=async e=>{let s=Me[e.id];s||(s=await Pe(e.id)),s.length>0&&(P(s,0),I(s[0],s))},is=(e,s)=>{I(e,s)};return(0,V.jsxs)("div",{className:"space-y-6",children:[(0,V.jsxs)("div",{className:"flex items-start gap-4",children:[(0,V.jsx)(D.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,V.jsx)(r.N_,{to:"/admin/artists",children:(0,V.jsx)(m.A,{className:"h-5 w-5"})})}),(0,V.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row gap-6",children:[(0,V.jsx)("div",{className:(0,W.cn)("w-32 h-32 md:w-48 md:h-48 rounded-xl shrink-0 overflow-hidden",!Je.image&&"bg-gradient-to-br ".concat((0,W.O3)(Je.id))),children:Je.image?(0,V.jsx)("img",{src:Je.image,alt:Je.name,className:"w-full h-full object-cover"}):(0,V.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,V.jsx)(o.A,{className:"h-16 w-16 text-white/50"})})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("h1",{className:"text-3xl font-bold",children:Je.name}),(0,V.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[Je.genre&&(0,V.jsx)($.E,{variant:"secondary",children:Je.genre}),(0,V.jsxs)("span",{className:"text-muted-foreground",children:[Oe.length," albums \u2022 ",Je.trackCount||ze.length," tracks"]})]})]}),(0,V.jsxs)(q.rI,{children:[(0,V.jsx)(q.ty,{asChild:!0,children:(0,V.jsx)(D.$,{variant:"outline",size:"icon",children:(0,V.jsx)(u.A,{className:"h-5 w-5"})})}),(0,V.jsxs)(q.SQ,{align:"end",children:[(0,V.jsxs)(q._2,{onClick:()=>{Ie({name:Je.name,bio:Je.bio||"",genre:Je.genre||"",image:Je.image||"",website:Je.website||""}),oe(!0)},children:[(0,V.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Edit Artist"]}),Je.website&&(0,V.jsx)(q._2,{asChild:!0,children:(0,V.jsxs)("a",{href:Je.website,target:"_blank",rel:"noopener noreferrer",children:[(0,V.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Visit Website"]})}),(0,V.jsx)(q.mB,{}),(0,V.jsxs)(q._2,{onClick:()=>ue(!0),className:"text-destructive",children:[(0,V.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete Artist"]})]})]})]}),Je.bio&&(0,V.jsx)("p",{className:"text-muted-foreground mt-4 line-clamp-3",children:Je.bio})]})]})]}),(0,V.jsxs)(Q.tU,{value:U,onValueChange:_,children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(Q.j7,{children:[(0,V.jsx)(Q.Xi,{value:"albums",children:"Albums"}),(0,V.jsx)(Q.Xi,{value:"tracks",children:"All Tracks"})]}),"albums"===U&&(0,V.jsxs)(D.$,{onClick:He,children:[(0,V.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Album"]})]}),(0,V.jsx)(Q.av,{value:"albums",className:"space-y-6",children:Le?(0,V.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>(0,V.jsx)(F.Zp,{children:(0,V.jsx)(F.Wu,{className:"p-6",children:(0,V.jsxs)("div",{className:"flex gap-4",children:[(0,V.jsx)(O.E,{className:"w-24 h-24 rounded-lg"}),(0,V.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,V.jsx)(O.E,{className:"h-6 w-48"}),(0,V.jsx)(O.E,{className:"h-4 w-32"})]})]})})},s))}):0===Oe.length?(0,V.jsx)(F.Zp,{children:(0,V.jsxs)(F.Wu,{className:"text-center py-12",children:[(0,V.jsx)(j.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,V.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No albums yet"}),(0,V.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create albums to organize this artist's content"}),(0,V.jsxs)(D.$,{onClick:He,children:[(0,V.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Create First Album"]})]})}):Oe.map(e=>(0,V.jsx)(le,{album:e,albumTracksCache:Me,fetchAlbumTracks:Pe,onEditAlbum:Ye,onDeleteAlbum:es,onAssignMedia:ss,onPlayAlbum:ts,onPlayTrack:is,onRemoveTrack:s=>Ke.mutate({albumId:e.id,mediaId:s.id}),onDragEnd:ls,addToast:S},e.id))}),(0,V.jsx)(Q.av,{value:"tracks",children:(0,V.jsx)(F.Zp,{children:(0,V.jsx)(F.Wu,{className:"p-0",children:$e?(0,V.jsx)("div",{className:"p-4 space-y-2",children:Array.from({length:5}).map((e,s)=>(0,V.jsx)(O.E,{className:"h-12 w-full"},s))}):0===ze.length?(0,V.jsxs)("div",{className:"text-center py-12",children:[(0,V.jsx)(v.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,V.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tracks assigned"}),(0,V.jsx)("p",{className:"text-muted-foreground",children:"Upload media and assign it to this artist"})]}):(0,V.jsx)("div",{className:"divide-y",children:ze.map((e,s)=>(0,V.jsxs)("div",{className:"flex items-center gap-3 p-3 hover:bg-muted/50 group",children:[(0,V.jsx)("span",{className:"w-8 text-sm text-muted-foreground text-center",children:s+1}),(0,V.jsx)("div",{className:(0,W.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,W.O3)(e.id))),children:e.thumbnail&&(0,V.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,V.jsx)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:e.albumId?(0,V.jsx)($.E,{variant:"secondary",className:"text-xs",children:"In Album"}):(0,V.jsx)($.E,{variant:"outline",className:"text-xs",children:"Single"})})]}),(0,V.jsx)($.E,{variant:"video"===e.type?"default":"secondary",children:e.type}),(0,V.jsx)(D.$,{variant:"ghost",size:"iconSm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>is(e,ze),children:(0,V.jsx)(f.A,{className:"h-4 w-4"})})]},e.id))})})})})]}),(0,V.jsx)(z.lG,{open:G,onOpenChange:K,children:(0,V.jsxs)(z.Cf,{className:"max-w-md",children:[(0,V.jsxs)(z.c7,{children:[(0,V.jsx)(z.L3,{children:"Add New Album"}),(0,V.jsxs)(z.rr,{children:["Create a new album for ",Je.name]})]}),(0,V.jsxs)("div",{className:"space-y-4 py-4",children:[(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Title *"}),(0,V.jsx)(L.p,{value:Ce.title,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{title:e.target.value})),placeholder:"Album title"})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Type"}),(0,V.jsxs)(M.l6,{value:Ce.type,onValueChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{type:e})),children:[(0,V.jsx)(M.bq,{children:(0,V.jsx)(M.yv,{placeholder:"Select type"})}),(0,V.jsx)(M.gC,{children:se.map(e=>(0,V.jsx)(M.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Genre"}),(0,V.jsx)(L.p,{value:Ce.genre,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{genre:e.target.value})),placeholder:"e.g., Spirituality, Jazz"})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Description"}),(0,V.jsx)(J.T,{value:Ce.description,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{description:e.target.value})),placeholder:"Album description",rows:2})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Cover Image URL"}),(0,V.jsx)(L.p,{value:Ce.coverImage,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{coverImage:e.target.value})),placeholder:"https://example.com/cover.jpg"})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Release Date"}),(0,V.jsx)(L.p,{type:"date",value:Ce.releaseDate,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{releaseDate:e.target.value}))})]})]}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>K(!1),children:"Cancel"}),(0,V.jsxs)(D.$,{onClick:()=>{Ce.title.trim()?Ue.mutate(Ce):S({message:"Album title is required",type:"error"})},disabled:Ue.isLoading,children:[Ue.isLoading&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Album"]})]})]})}),(0,V.jsx)(z.lG,{open:X,onOpenChange:H,children:(0,V.jsxs)(z.Cf,{className:"max-w-md",children:[(0,V.jsx)(z.c7,{children:(0,V.jsx)(z.L3,{children:"Edit Album"})}),(0,V.jsxs)("div",{className:"space-y-4 py-4",children:[(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Title *"}),(0,V.jsx)(L.p,{value:Ce.title,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{title:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Type"}),(0,V.jsxs)(M.l6,{value:Ce.type,onValueChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{type:e})),children:[(0,V.jsx)(M.bq,{children:(0,V.jsx)(M.yv,{})}),(0,V.jsx)(M.gC,{children:se.map(e=>(0,V.jsx)(M.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Genre"}),(0,V.jsx)(L.p,{value:Ce.genre,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{genre:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Description"}),(0,V.jsx)(J.T,{value:Ce.description,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{description:e.target.value})),rows:2})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Cover Image URL"}),(0,V.jsx)(L.p,{value:Ce.coverImage,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{coverImage:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Release Date"}),(0,V.jsx)(L.p,{type:"date",value:Ce.releaseDate,onChange:e=>ke((0,l.A)((0,l.A)({},Ce),{},{releaseDate:e.target.value}))})]})]}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>H(!1),children:"Cancel"}),(0,V.jsxs)(D.$,{onClick:()=>{Ce.title.trim()?_e.mutate({id:xe.id,data:Ce}):S({message:"Album title is required",type:"error"})},disabled:_e.isLoading,children:[_e.isLoading&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})}),(0,V.jsx)(z.lG,{open:ae,onOpenChange:te,children:(0,V.jsxs)(z.Cf,{children:[(0,V.jsxs)(z.c7,{children:[(0,V.jsx)(z.L3,{children:"Delete Album"}),(0,V.jsxs)(z.rr,{children:['Are you sure you want to delete "',null===xe||void 0===xe?void 0:xe.title,'"?']})]}),(0,V.jsx)("p",{className:"text-sm text-muted-foreground py-4",children:"The tracks in this album will not be deleted, but they will become unassigned."}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>te(!1),children:"Cancel"}),(0,V.jsxs)(D.$,{variant:"destructive",onClick:()=>{Ge.mutate(xe.id)},disabled:Ge.isLoading,children:[Ge.isLoading&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Album"]})]})]})}),(0,V.jsx)(z.lG,{open:ie,onOpenChange:re,children:(0,V.jsxs)(z.Cf,{className:"max-w-3xl max-h-[80vh] flex flex-col",children:[(0,V.jsxs)(z.c7,{children:[(0,V.jsxs)(z.L3,{children:["Add Tracks to ",null===xe||void 0===xe?void 0:xe.title]}),(0,V.jsx)(z.rr,{children:"Select tracks from existing media or file manager"})]}),(0,V.jsxs)(Q.tU,{value:je,onValueChange:ve,className:"flex-1 flex flex-col",children:[(0,V.jsxs)(Q.j7,{className:"grid w-full grid-cols-2",children:[(0,V.jsx)(Q.Xi,{value:"existing",children:"Existing Media"}),(0,V.jsxs)(Q.Xi,{value:"file-manager",children:[(0,V.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"From File Manager"]})]}),(0,V.jsx)(Q.av,{value:"existing",className:"flex-1 overflow-y-auto py-4",children:0===Be.length?(0,V.jsxs)("div",{className:"text-center py-8",children:[(0,V.jsx)(v.A,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),(0,V.jsx)("p",{className:"text-muted-foreground",children:"No unassigned media available"})]}):(0,V.jsx)("div",{className:"space-y-1",children:Be.map(e=>(0,V.jsxs)("div",{onClick:()=>as(e.id),className:(0,W.cn)("flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors",pe.includes(e.id)?"bg-primary/20 border border-primary":"hover:bg-muted/50"),children:[(0,V.jsx)(B.S,{checked:pe.includes(e.id),onCheckedChange:()=>as(e.id)}),(0,V.jsx)("div",{className:(0,W.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,W.O3)(e.id))),children:e.thumbnail&&(0,V.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,V.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle||"No description"})]}),(0,V.jsx)($.E,{variant:"video"===e.type?"default":"secondary",children:e.type})]},e.id))})}),(0,V.jsx)(Q.av,{value:"file-manager",className:"flex-1 py-4",children:(0,V.jsxs)("div",{className:"space-y-4",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select audio/video files from your file manager"}),(0,V.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>de(!0),children:[(0,V.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Browse Files"]})]}),0===fe.length?(0,V.jsxs)("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[(0,V.jsx)(N.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-2"}),(0,V.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"No files selected"}),(0,V.jsx)(D.$,{onClick:()=>de(!0),children:"Select Files"})]}):(0,V.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:fe.map((e,s)=>{const a=Ne[e.id]||{};return(0,V.jsx)(F.Zp,{children:(0,V.jsx)(F.Wu,{className:"p-4",children:(0,V.jsxs)("div",{className:"flex items-start gap-3",children:[(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["video"===e.type?(0,V.jsx)(y.A,{className:"h-4 w-4 text-blue-500"}):(0,V.jsx)(v.A,{className:"h-4 w-4 text-purple-500"}),(0,V.jsx)("p",{className:"font-medium truncate",children:e.name}),(0,V.jsx)($.E,{variant:"outline",className:"text-xs",children:e.type})]}),(0,V.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,V.jsxs)("div",{className:"space-y-1",children:[(0,V.jsxs)(R.J,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,V.jsx)(A.A,{className:"h-3 w-3"}),"Subtitle (optional)"]}),(0,V.jsx)(D.$,{variant:"outline",size:"sm",className:"w-full justify-start text-xs h-8",onClick:()=>{ye(s=>(0,l.A)((0,l.A)({},s),{},{[e.id]:(0,l.A)((0,l.A)({},s[e.id]),{},{selectingType:"subtitle"})})),de(!0)},children:a.subtitle?(0,V.jsx)("span",{className:"truncate",children:a.subtitle.name}):"Select subtitle"})]}),(0,V.jsxs)("div",{className:"space-y-1",children:[(0,V.jsxs)(R.J,{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,V.jsx)(w.A,{className:"h-3 w-3"}),"Thumbnail (optional)"]}),(0,V.jsx)(D.$,{variant:"outline",size:"sm",className:"w-full justify-start text-xs h-8",onClick:()=>{ye(s=>(0,l.A)((0,l.A)({},s),{},{[e.id]:(0,l.A)((0,l.A)({},s[e.id]),{},{selectingType:"thumbnail"})})),de(!0)},children:a.thumbnail?(0,V.jsx)("span",{className:"truncate",children:a.thumbnail.name}):"Select thumbnail"})]})]})]}),(0,V.jsx)(D.$,{variant:"ghost",size:"iconSm",onClick:()=>{be(s=>s.filter(s=>s.id!==e.id)),ye(s=>{const a=(0,l.A)({},s);return delete a[e.id],a})},children:(0,V.jsx)(C.A,{className:"h-4 w-4"})})]})})},e.id)})})]})})]}),(0,V.jsxs)(z.Es,{className:"border-t pt-4",children:[(0,V.jsx)("div",{className:"flex-1 text-sm text-muted-foreground",children:"existing"===je?"".concat(pe.length," tracks selected"):"".concat(fe.length," files selected")}),(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>{re(!1),ve("existing"),be([]),ye({})},children:"Cancel"}),(0,V.jsxs)(D.$,{onClick:"existing"===je?async()=>{if(0===pe.length)return void S({message:"Select at least one track",type:"error"});let s=(Me[xe.id]||[]).length+1;console.log("Adding tracks to album:",xe.id,"tracks:",pe);try{for(const e of pe)console.log("Adding media:",e,"track number:",s),await Ve.mutateAsync({albumId:xe.id,mediaId:e,trackNumber:s++});a.invalidateQueries(["album-media",xe.id]),a.invalidateQueries(["artist-albums",e]),Qe(e=>{const s=(0,l.A)({},e);return delete s[xe.id],s}),re(!1),he(null),ge([]),S({message:"".concat(pe.length," tracks added to album"),type:"success"})}catch(r){var t,i;console.error("Failed to add tracks:",r),S({message:(null===(t=r.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Failed to add tracks",type:"error"})}}:async()=>{if(0!==fe.length){we(!0);try{const s=fe.map(e=>{var s,a;const l=Ne[e.id]||{};return{path:e.path,name:e.name,type:e.type,subtitlePath:(null===(s=l.subtitle)||void 0===s?void 0:s.path)||null,thumbnailPath:(null===(a=l.thumbnail)||void 0===a?void 0:a.path)||null}}),t=localStorage.getItem("accessToken"),i=await Z.A.post("".concat(ee,"/api/files/create-media"),{files:s,artistId:e,albumId:null,language:"en"},{headers:{Authorization:"Bearer ".concat(t)}});if(!(i.data.success&&i.data.data.created.length>0))throw new Error("Failed to create media entries");{let s=(Me[xe.id]||[]).length+1;for(const e of i.data.data.created)await Ve.mutateAsync({albumId:xe.id,mediaId:e.id,trackNumber:s++});a.invalidateQueries(["album-media",xe.id]),a.invalidateQueries(["artist-albums",e]),a.invalidateQueries(["artist-media",e]),a.invalidateQueries(["admin-media"]),Qe(e=>{const s=(0,l.A)({},e);return delete s[xe.id],s}),re(!1),ve("existing"),be([]),ye({}),S({message:"Created and added ".concat(i.data.data.created.length," tracks"),type:"success"})}}catch(i){var s,t;console.error("Error creating media from files:",i),S({message:(null===(s=i.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to create media from files",type:"error"})}finally{we(!1)}}else S({message:"No files selected",type:"error"})},disabled:"existing"===je&&0===pe.length||"file-manager"===je&&0===fe.length||Ae||Ve.isPending,children:[(Ae||Ve.isPending)&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),(0,V.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"existing"===je?"Add to Album":"Create & Add to Album"]})]})]})}),(0,V.jsx)(Y,{open:ne,onOpenChange:de,onSelect:e=>{const s=Object.entries(Ne).find(e=>{let[s,a]=e;return null===a||void 0===a?void 0:a.selectingType});if(s){const[a,t]=s,i=t.selectingType;e.length>0&&ye(s=>(0,l.A)((0,l.A)({},s),{},{[a]:(0,l.A)((0,l.A)({},s[a]),{},{[i]:e[0],selectingType:null})}))}else be(e);de(!1)},multiSelect:!0,allowedTypes:Object.values(Ne).some(e=>"subtitle"===(null===e||void 0===e?void 0:e.selectingType))?["subtitle"]:Object.values(Ne).some(e=>"thumbnail"===(null===e||void 0===e?void 0:e.selectingType))?["image"]:["audio","video","hls"],title:Object.values(Ne).some(e=>"subtitle"===(null===e||void 0===e?void 0:e.selectingType))?"Select Subtitle File":Object.values(Ne).some(e=>"thumbnail"===(null===e||void 0===e?void 0:e.selectingType))?"Select Thumbnail":"Select Media Files"}),(0,V.jsx)(z.lG,{open:ce,onOpenChange:oe,children:(0,V.jsxs)(z.Cf,{className:"max-w-md",children:[(0,V.jsx)(z.c7,{children:(0,V.jsx)(z.L3,{children:"Edit Artist"})}),(0,V.jsxs)("div",{className:"space-y-4 py-4",children:[(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Name *"}),(0,V.jsx)(L.p,{value:Se.name,onChange:e=>Ie((0,l.A)((0,l.A)({},Se),{},{name:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Genre"}),(0,V.jsx)(L.p,{value:Se.genre,onChange:e=>Ie((0,l.A)((0,l.A)({},Se),{},{genre:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Biography"}),(0,V.jsx)(J.T,{value:Se.bio,onChange:e=>Ie((0,l.A)((0,l.A)({},Se),{},{bio:e.target.value})),rows:3})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Image URL"}),(0,V.jsx)(L.p,{value:Se.image,onChange:e=>Ie((0,l.A)((0,l.A)({},Se),{},{image:e.target.value}))})]}),(0,V.jsxs)("div",{className:"space-y-2",children:[(0,V.jsx)(R.J,{children:"Website"}),(0,V.jsx)(L.p,{value:Se.website,onChange:e=>Ie((0,l.A)((0,l.A)({},Se),{},{website:e.target.value}))})]})]}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>oe(!1),children:"Cancel"}),(0,V.jsxs)(D.$,{onClick:()=>{Se.name.trim()?Ze.mutate(Se):S({message:"Artist name is required",type:"error"})},disabled:Ze.isLoading,children:[Ze.isLoading&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})}),(0,V.jsx)(z.lG,{open:me,onOpenChange:ue,children:(0,V.jsxs)(z.Cf,{children:[(0,V.jsxs)(z.c7,{children:[(0,V.jsx)(z.L3,{children:"Delete Artist"}),(0,V.jsxs)(z.rr,{children:['Are you sure you want to delete "',Je.name,'"?']})]}),(0,V.jsx)("p",{className:"text-sm text-muted-foreground py-4",children:"This will delete all albums associated with this artist. Media files will not be deleted but will become unassigned."}),(0,V.jsxs)(z.Es,{children:[(0,V.jsx)(D.$,{variant:"ghost",onClick:()=>ue(!1),children:"Cancel"}),(0,V.jsxs)(D.$,{variant:"destructive",onClick:()=>{We.mutate()},disabled:We.isLoading,children:[We.isLoading&&(0,V.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Artist"]})]})]})})]})}function le(e){var s;let{album:a,albumTracksCache:i,fetchAlbumTracks:r,onEditAlbum:n,onDeleteAlbum:d,onAssignMedia:c,onPlayAlbum:o,onPlayTrack:m,onRemoveTrack:h,onDragEnd:b,addToast:N}=e;const[A,w]=(0,t.useState)([]),[k,T]=(0,t.useState)(!0);return t.useEffect(()=>{(async()=>{T(!0);const e=await r(a.id);w(e),T(!1)})()},[a.id,r,i[a.id]]),(0,V.jsxs)(F.Zp,{children:[(0,V.jsx)(F.aR,{children:(0,V.jsxs)("div",{className:"flex items-start gap-4",children:[(0,V.jsx)("div",{className:(0,W.cn)("w-24 h-24 rounded-lg shrink-0 overflow-hidden",!a.coverImage&&"bg-gradient-to-br ".concat((0,W.O3)(a.id))),children:a.coverImage?(0,V.jsx)("img",{src:a.coverImage,alt:a.title,className:"w-full h-full object-cover"}):(0,V.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,V.jsx)(j.A,{className:"h-10 w-10 text-white/50"})})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsxs)("div",{className:"flex items-start justify-between",children:[(0,V.jsxs)("div",{children:[(0,V.jsx)(F.ZB,{className:"text-xl",children:a.title}),(0,V.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(0,V.jsx)($.E,{variant:"outline",children:(null===(s=se.find(e=>e.value===a.type))||void 0===s?void 0:s.label)||"Album"}),(0,V.jsxs)("span",{children:[a.trackCount||A.length," tracks"]}),a.releaseDate&&(0,V.jsxs)("span",{children:["\u2022 ",a.releaseDate.split("T")[0]]})]})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2",children:[A.length>0&&(0,V.jsx)(D.$,{variant:"spotify",size:"icon",onClick:()=>o(a),children:(0,V.jsx)(f.A,{className:"h-5 w-5 ml-0.5"})}),(0,V.jsxs)(q.rI,{children:[(0,V.jsx)(q.ty,{asChild:!0,children:(0,V.jsx)(D.$,{variant:"ghost",size:"icon",children:(0,V.jsx)(u.A,{className:"h-5 w-5"})})}),(0,V.jsxs)(q.SQ,{align:"end",children:[(0,V.jsxs)(q._2,{onClick:()=>c(a),children:[(0,V.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Tracks"]}),(0,V.jsxs)(q._2,{onClick:()=>n(a),children:[(0,V.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Edit Album"]}),(0,V.jsx)(q.mB,{}),(0,V.jsxs)(q._2,{onClick:()=>d(a),className:"text-destructive",children:[(0,V.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete Album"]})]})]})]})]}),a.description&&(0,V.jsx)("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:a.description})]})]})}),(0,V.jsx)(F.Wu,{children:k?(0,V.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,s)=>(0,V.jsx)(O.E,{className:"h-12 w-full"},s))}):0===A.length?(0,V.jsxs)("div",{className:"text-center py-6 border border-dashed rounded-lg",children:[(0,V.jsx)(v.A,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),(0,V.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"No tracks in this album"}),(0,V.jsxs)(D.$,{variant:"outline",size:"sm",onClick:()=>c(a),children:[(0,V.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Tracks"]})]}):(0,V.jsx)(I.JY,{onDragEnd:e=>b(e,a.id,A),children:(0,V.jsx)(I.gL,{droppableId:a.id,children:e=>(0,V.jsxs)("div",(0,l.A)((0,l.A)({ref:e.innerRef},e.droppableProps),{},{className:"space-y-1",children:[A.map((e,s)=>(0,V.jsx)(I.sx,{draggableId:e.id,index:s,children:(a,t)=>(0,V.jsxs)("div",(0,l.A)((0,l.A)({ref:a.innerRef},a.draggableProps),{},{className:(0,W.cn)("flex items-center gap-3 p-2 rounded-lg group hover:bg-muted/50",t.isDragging&&"bg-muted shadow-lg"),children:[(0,V.jsx)("div",(0,l.A)((0,l.A)({},a.dragHandleProps),{},{className:"text-muted-foreground hover:text-foreground cursor-grab",children:(0,V.jsx)(S.A,{className:"h-4 w-4"})})),(0,V.jsx)("span",{className:"w-6 text-sm text-muted-foreground text-center",children:e.trackNumber||s+1}),(0,V.jsx)("div",{className:(0,W.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,W.O3)(e.id))),children:e.thumbnail&&(0,V.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,V.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,V.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,V.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:["video"===e.type?(0,V.jsx)(y.A,{className:"h-3 w-3"}):(0,V.jsx)(v.A,{className:"h-3 w-3"}),(0,V.jsx)("span",{children:e.type})]})]}),(0,V.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,V.jsx)(D.$,{variant:"ghost",size:"iconSm",onClick:()=>m(e,A),children:(0,V.jsx)(f.A,{className:"h-4 w-4"})}),(0,V.jsx)(D.$,{variant:"ghost",size:"iconSm",onClick:()=>h(e),children:(0,V.jsx)(C.A,{className:"h-4 w-4"})})]})]}))},e.id)),e.placeholder]}))})})})]})}},65005:(e,s,a)=>{a.d(s,{S:()=>m});var l=a(27051),t=a(53986),i=a(65043),r=a(76622),n=a(36210),d=a(99766),c=a(70579);const o=["className"],m=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,o);return(0,c.jsx)(r.bL,(0,l.A)((0,l.A)({ref:s,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a)},i),{},{children:(0,c.jsx)(r.C1,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,c.jsx)(n.A,{className:"h-4 w-4"})})}))});m.displayName=r.bL.displayName},84370:(e,s,a)=>{a.d(s,{bq:()=>N,eb:()=>C,gC:()=>w,l6:()=>f,yv:()=>b});var l=a(27051),t=a(53986),i=a(65043),r=a(22095),n=a(36210),d=a(92382),c=a(15711),o=a(99766),m=a(70579);const u=["className","children"],x=["className"],h=["className"],p=["className","children","position"],g=["className"],j=["className","children"],v=["className"],f=r.bL,b=(r.YJ,r.WT),N=i.forwardRef((e,s)=>{let{className:a,children:i}=e,n=(0,t.A)(e,u);return(0,m.jsxs)(r.l9,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},n),{},{children:[i,(0,m.jsx)(r.In,{asChild:!0,children:(0,m.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]}))});N.displayName=r.l9.displayName;const y=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,x);return(0,m.jsx)(r.PP,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},i),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});y.displayName=r.PP.displayName;const A=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,h);return(0,m.jsx)(r.wn,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},i),{},{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})}))});A.displayName=r.wn.displayName;const w=i.forwardRef((e,s)=>{let{className:a,children:i,position:n="popper"}=e,d=(0,t.A)(e,p);return(0,m.jsx)(r.ZL,{children:(0,m.jsxs)(r.UC,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n},d),{},{children:[(0,m.jsx)(y,{}),(0,m.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,m.jsx)(A,{})]}))})});w.displayName=r.UC.displayName;i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,g);return(0,m.jsx)(r.JU,(0,l.A)({ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},i))}).displayName=r.JU.displayName;const C=i.forwardRef((e,s)=>{let{className:a,children:i}=e,d=(0,t.A)(e,j);return(0,m.jsxs)(r.q7,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},d),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(r.VF,{children:(0,m.jsx)(n.A,{className:"h-4 w-4"})})}),(0,m.jsx)(r.p4,{children:i})]}))});C.displayName=r.q7.displayName;i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,v);return(0,m.jsx)(r.wv,(0,l.A)({ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a)},i))}).displayName=r.wv.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>j,Wu:()=>v,ZB:()=>g,Zp:()=>h,aR:()=>p});var l=a(27051),t=a(53986),i=a(65043),r=a(99766),n=a(70579);const d=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],x=["className"],h=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,d);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},i))});h.displayName="Card";const p=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,c);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a)},i))});p.displayName="CardHeader";const g=i.forwardRef((e,s)=>{let{className:a,children:i}=e,d=(0,t.A)(e,o);return(0,n.jsx)("h3",(0,l.A)((0,l.A)({ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a)},d),{},{children:i}))});g.displayName="CardTitle";const j=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,m);return(0,n.jsx)("p",(0,l.A)({ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a)},i))});j.displayName="CardDescription";const v=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,u);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("p-6 pt-0",a)},i))});v.displayName="CardContent";i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,x);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a)},i))}).displayName="CardFooter"}}]);
//# sourceMappingURL=9803.95e07fe9.chunk.js.map