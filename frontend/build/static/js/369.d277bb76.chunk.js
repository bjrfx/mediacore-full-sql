"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[369],{50369:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var l=s(65043),a=s(73216),r=s(35475),n=s(12265),c=s(81228),i=s(35613),o=s(36360),u=s(94574),d=s(90292),m=s(19340),h=s(64830),x=s(43677),f=s(75699),p=s(94505),j=s(99766),b=s(70579);const v="https://app.mediacore.in";function w(){const{id:e}=(0,a.g)(),[t]=(0,r.ok)(),s="1"===t.get("autoplay"),w="1"===t.get("loop"),g="1"===t.get("muted"),N=parseInt(t.get("start")||"0",10),[y,k]=(0,l.useState)(!1),[C,A]=(0,l.useState)(g),[E,T]=(0,l.useState)(g?0:1),[S,M]=(0,l.useState)(0),[P,U]=(0,l.useState)(0),[F,L]=(0,l.useState)(!1),[I,R]=(0,l.useState)(!0),[q,_]=(0,l.useState)(!0),[B,W]=(0,l.useState)(!1),z=(0,l.useRef)(null),H=(0,l.useRef)(null),K=(0,l.useRef)(null),{data:O,isLoading:X,error:D}=(0,n.I)({queryKey:["embedMedia",e],queryFn:()=>p.O0.getMediaById(e),enabled:!!e,staleTime:6e5}),G=null===O||void 0===O?void 0:O.data,J="video"===(null===G||void 0===G?void 0:G.type),Q=()=>G?G.isHls&&G.hlsPlaylistUrl?G.hlsPlaylistUrl:G.fileUrl||G.filePath||"":"";(0,l.useEffect)(()=>{G&&s&&!B&&(A(!0),V())},[G,s]),(0,l.useEffect)(()=>{z.current&&N>0&&(z.current.currentTime=N)},[N,I]),(0,l.useEffect)(()=>(y&&J&&(K.current=setTimeout(()=>{_(!1)},3e3)),()=>{K.current&&clearTimeout(K.current)}),[y,J,q]),(0,l.useEffect)(()=>{const e=()=>{L(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]);const V=()=>{z.current&&(W(!0),y?(z.current.pause(),k(!1)):z.current.play().then(()=>k(!0)).catch(e=>{console.error("Playback failed:",e),"NotAllowedError"===e.name&&(A(!0),T(0),z.current.muted=!0,z.current.play().then(()=>k(!0)).catch(console.error))}))},Y=()=>{z.current&&M(z.current.currentTime)},Z=()=>{z.current&&(U(z.current.duration),R(!1))},$=()=>{k(!1),w&&z.current&&(z.current.currentTime=0,z.current.play(),k(!0))};if(D)return(0,b.jsx)("div",{className:"w-full h-full min-h-[200px] bg-black flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center text-white/80 px-4",children:[(0,b.jsx)(i.A,{className:"h-10 w-10 mx-auto mb-3 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"Content not available"})]})});if(X||!G)return(0,b.jsx)("div",{className:"w-full h-full min-h-[200px] bg-black flex items-center justify-center",children:(0,b.jsx)(o.A,{className:"h-8 w-8 animate-spin text-white/50"})});const ee=P>0?S/P*100:0;return(0,b.jsxs)("div",{ref:H,className:(0,j.cn)("relative w-full bg-black overflow-hidden",J?"aspect-video":"h-[152px]"),onMouseMove:()=>{_(!0),K.current&&clearTimeout(K.current)},onMouseEnter:()=>_(!0),children:[J?(0,b.jsx)("video",{ref:z,src:Q(),poster:G.thumbnail,className:"w-full h-full object-contain",onTimeUpdate:Y,onLoadedMetadata:Z,onEnded:$,onWaiting:()=>R(!0),onCanPlay:()=>R(!1),playsInline:!0,muted:C}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute inset-0",children:G.thumbnail?(0,b.jsx)("img",{src:G.thumbnail,alt:"",className:"w-full h-full object-cover blur-sm opacity-30"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-accent/20"})}),(0,b.jsx)("audio",{ref:z,src:Q(),onTimeUpdate:Y,onLoadedMetadata:Z,onEnded:$,onWaiting:()=>R(!0),onCanPlay:()=>R(!1),muted:C}),(0,b.jsxs)("div",{className:"absolute inset-0 flex items-center px-4 gap-4 z-10",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 shadow-lg",children:G.thumbnail?(0,b.jsx)("img",{src:G.thumbnail,alt:G.title,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:(0,b.jsx)(h.A,{className:"h-8 w-8 text-white/50"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 text-white",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm line-clamp-1",children:G.title}),(0,b.jsx)("p",{className:"text-xs text-white/60 line-clamp-1 mt-1",children:G.artistName||G.subtitle||"Unknown"})]})]})]}),I&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:(0,b.jsx)(o.A,{className:"h-8 w-8 animate-spin text-white"})}),J&&!B&&!y&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer bg-black/30",onClick:V,children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center shadow-xl",children:(0,b.jsx)(h.A,{className:"h-8 w-8 text-black ml-1"})})}),(0,b.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:q||!y?1:0},className:(0,j.cn)("absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent",J?"pt-12 pb-3":"pt-2 pb-2"),children:(0,b.jsxs)("div",{className:"px-3",children:[(0,b.jsx)("div",{className:"group h-1 bg-white/20 rounded-full cursor-pointer mb-2 hover:h-1.5 transition-all",onClick:e=>{if(!z.current)return;const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*P;z.current.currentTime=s,M(s)},children:(0,b.jsx)("div",{className:"h-full bg-primary rounded-full relative",style:{width:"".concat(ee,"%")},children:(0,b.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"})})}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:V,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:y?(0,b.jsx)(m.A,{className:"h-5 w-5"}):(0,b.jsx)(h.A,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex items-center gap-1 group/vol",children:[(0,b.jsx)("button",{onClick:()=>{if(!z.current)return;const e=!C;A(e),z.current.muted=e,e||0!==E||(T(1),z.current.volume=1)},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:C||0===E?(0,b.jsx)(f.A,{className:"h-4 w-4"}):(0,b.jsx)(x.A,{className:"h-4 w-4"})}),(0,b.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:C?0:E,onChange:e=>{if(!z.current)return;const t=parseFloat(e.target.value);T(t),z.current.volume=t,A(0===t)},className:"w-0 group-hover/vol:w-16 opacity-0 group-hover/vol:opacity-100 transition-all h-1 cursor-pointer accent-primary"})]}),(0,b.jsxs)("span",{className:"text-xs text-white/70 ml-2",children:[(0,j.a3)(S)," / ",(0,j.a3)(P)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("a",{href:"".concat(v,"/").concat(J?"watch":"listen","/").concat(e),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-white/50 hover:text-white/80 transition-colors px-2",children:"MediaCore"}),J&&(0,b.jsx)("button",{onClick:async()=>{H.current&&(F?await document.exitFullscreen():await H.current.requestFullscreen())},className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:F?(0,b.jsx)(d.A,{className:"h-4 w-4"}):(0,b.jsx)(u.A,{className:"h-4 w-4"})})]})]})]})})]})}}}]);
//# sourceMappingURL=369.d277bb76.chunk.js.map