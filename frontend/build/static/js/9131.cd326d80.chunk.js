/*! For license information please see 9131.cd326d80.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[9131],{18992:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(21639).A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},19131:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var a=s(27051),l=s(65043),n=s(81228),r=s(96938);const o=(0,s(21639).A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=s(36360),d=s(35613),c=s(64830),x=s(50516),m=s(18992),h=s(9855),u=s(7104),w=s(94965),j=s(83204),y=s(99766),f=s(16347),p=s(18717),g=s(13390),v=s(45735),N=s(17484),D=s(82353),k=s(73216),A=s(70579);const b=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},C=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};function S(e){let{download:t,onPlay:s,onRemove:a,onRetry:l}=e;const{media:r,status:u,progress:w,size:j,downloadedAt:p,error:D}=t,k="video"===(null===r||void 0===r?void 0:r.type);return(0,A.jsxs)(n.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:(0,y.cn)("flex items-center gap-4 p-4 rounded-lg bg-card hover:bg-card/80 transition-colors group",u===f.DownloadStatus.FAILED&&"border border-red-500/20"),children:[(0,A.jsxs)("div",{className:(0,y.cn)("relative w-16 h-16 rounded-md overflow-hidden shrink-0 cursor-pointer",u===f.DownloadStatus.COMPLETED&&"group-hover:ring-2 ring-primary"),onClick:()=>u===f.DownloadStatus.COMPLETED&&s(r),children:[null!==r&&void 0!==r&&r.thumbnail?(0,A.jsx)("img",{src:r.thumbnail,alt:r.title,className:"w-full h-full object-cover"}):(0,A.jsx)(v.X1,{title:(null===r||void 0===r?void 0:r.title)||"Unknown",id:(null===r||void 0===r?void 0:r.id)||"0",isVideo:k,size:"small"}),u===f.DownloadStatus.COMPLETED&&(0,A.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,A.jsx)(c.A,{className:"w-6 h-6 text-white",fill:"white"})}),u===f.DownloadStatus.DOWNLOADING&&(0,A.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,A.jsxs)("div",{className:"relative w-10 h-10",children:[(0,A.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,A.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-white/20"}),(0,A.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"".concat(.88*w," 88"),strokeLinecap:"round",className:"text-primary transition-all duration-300"})]}),(0,A.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:[w,"%"]})]})})]}),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsx)("h3",{className:"font-medium truncate",children:(null===r||void 0===r?void 0:r.title)||"Unknown"}),(0,A.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(()=>{switch(u){case f.DownloadStatus.COMPLETED:return(0,A.jsx)(o,{className:"w-4 h-4 text-green-500"});case f.DownloadStatus.DOWNLOADING:return(0,A.jsx)(i.A,{className:"w-4 h-4 text-primary animate-spin"});case f.DownloadStatus.FAILED:return(0,A.jsx)(d.A,{className:"w-4 h-4 text-red-500"});default:return null}})(),(0,A.jsx)("span",{children:(()=>{switch(u){case f.DownloadStatus.COMPLETED:return"Downloaded ".concat(C(p));case f.DownloadStatus.DOWNLOADING:return"Downloading ".concat(w,"%");case f.DownloadStatus.FAILED:return D||"Download failed";default:return"Pending"}})()}),j>0&&u===f.DownloadStatus.COMPLETED&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("span",{children:"\u2022"}),(0,A.jsx)("span",{children:b(j)})]})]}),(null===r||void 0===r?void 0:r.artist)&&(0,A.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:r.artist})]}),(0,A.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[u===f.DownloadStatus.COMPLETED&&(0,A.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>s(r),className:"text-primary hover:text-primary",children:(0,A.jsx)(c.A,{className:"w-5 h-5",fill:"currentColor"})}),u===f.DownloadStatus.FAILED&&(0,A.jsx)(g.$,{variant:"ghost",size:"icon",onClick:()=>l(r.id),className:"text-yellow-500 hover:text-yellow-400",children:(0,A.jsx)(x.A,{className:"w-5 h-5"})}),(0,A.jsxs)(N.rI,{children:[(0,A.jsx)(N.ty,{asChild:!0,children:(0,A.jsx)(g.$,{variant:"ghost",size:"icon",children:(0,A.jsx)(m.A,{className:"w-5 h-5"})})}),(0,A.jsxs)(N.SQ,{align:"end",children:[u===f.DownloadStatus.COMPLETED&&(0,A.jsxs)(N._2,{onClick:()=>s(r),children:[(0,A.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Play"]}),u===f.DownloadStatus.FAILED&&(0,A.jsxs)(N._2,{onClick:()=>l(r.id),children:[(0,A.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Retry Download"]}),(0,A.jsxs)(N._2,{onClick:()=>a(r.id),className:"text-red-500 focus:text-red-500",children:[(0,A.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})]})]})}function E(){const{user:e}=(0,p.nc)(),{downloads:t,removeDownload:s,retryDownload:o,clearAllDownloads:c,getTotalDownloadSize:x}=(0,f.default)(),{playTrack:m,getDownloadedUrl:y,isDownloaded:v}=f.default.getState(),{playTrack:N}=(0,p.ut)(),[C,E]=(0,l.useState)(!1);if(!e)return(0,A.jsx)(k.C5,{to:"/login",replace:!0});const L=Object.values(t),O=L.filter(e=>e.status===f.DownloadStatus.COMPLETED),P=L.filter(e=>e.status===f.DownloadStatus.DOWNLOADING),M=L.filter(e=>e.status===f.DownloadStatus.FAILED),T=x(),I=async e=>{const t=await f.default.getState().getDownloadedUrl(e.id);N(t?(0,a.A)((0,a.A)({},e),{},{fileUrl:t,isOffline:!0}):e,null,!1)},R=e=>{s(e)},F=e=>{o(e)};return(0,A.jsxs)("div",{className:"min-h-full pb-32",children:[(0,A.jsx)("div",{className:"px-6 pt-6 pb-4",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,A.jsx)(u.A,{className:"w-8 h-8 text-primary"}),"Downloads"]}),(0,A.jsxs)("p",{className:"text-muted-foreground mt-1",children:[O.length," items \u2022 ",b(T)]})]}),L.length>0&&(0,A.jsxs)(g.$,{variant:"outline",onClick:()=>E(!0),className:"text-red-500 hover:text-red-400 hover:border-red-500/50",children:[(0,A.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),(P.length>0||M.length>0)&&(0,A.jsx)("div",{className:"px-6 pb-4",children:(0,A.jsxs)("div",{className:"flex gap-4",children:[P.length>0&&(0,A.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 text-primary text-sm",children:[(0,A.jsx)(i.A,{className:"w-4 h-4 animate-spin"}),P.length," downloading"]}),M.length>0&&(0,A.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/10 text-red-500 text-sm",children:[(0,A.jsx)(d.A,{className:"w-4 h-4"}),M.length," failed"]})]})}),(0,A.jsx)("div",{className:"px-6",children:0===L.length?(0,A.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,A.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,A.jsx)(w.A,{className:"w-10 h-10 text-muted-foreground"})}),(0,A.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Downloads Yet"}),(0,A.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Download videos and audio to watch or listen offline. Look for the download button on any media item."})]}):(0,A.jsx)("div",{className:"space-y-2",children:(0,A.jsxs)(r.N,{mode:"popLayout",children:[P.map(e=>(0,A.jsx)(S,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id)),M.map(e=>(0,A.jsx)(S,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id)),O.map(e=>(0,A.jsx)(S,{download:e,onPlay:I,onRemove:R,onRetry:F},e.media.id))]})})}),O.length>0&&(0,A.jsx)("div",{className:"px-6 mt-8",children:(0,A.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50 flex items-center gap-4",children:[(0,A.jsx)(j.A,{className:"w-8 h-8 text-muted-foreground"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"font-medium",children:"Storage Used"}),(0,A.jsxs)("p",{className:"text-sm text-muted-foreground",children:[b(T)," used for offline content"]})]})]})}),(0,A.jsx)(D.Lt,{open:C,onOpenChange:E,children:(0,A.jsxs)(D.EO,{children:[(0,A.jsxs)(D.wd,{children:[(0,A.jsx)(D.r7,{children:"Clear All Downloads?"}),(0,A.jsxs)(D.$v,{children:["This will remove all downloaded content (",b(T),"). You can always download them again later."]})]}),(0,A.jsxs)(D.ck,{children:[(0,A.jsx)(D.Zr,{children:"Cancel"}),(0,A.jsx)(D.Rx,{onClick:()=>{c(),E(!1)},className:"bg-red-500 hover:bg-red-600",children:"Clear All"})]})]})})]})}},83204:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(21639).A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},94965:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(21639).A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])}}]);
//# sourceMappingURL=9131.cd326d80.chunk.js.map