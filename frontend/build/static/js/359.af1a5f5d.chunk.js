/*! For license information please see 359.af1a5f5d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[359],{18992:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(21639).A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},58359:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var s=t(27051),l=t(65043),r=t(81228),o=t(96938),n=t(21639);const i=(0,n.A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=t(36360),d=t(35613),m=t(64830),u=t(50516),x=t(18992),h=t(9855),p=t(7104);const f=(0,n.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),g=(0,n.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var A=t(99766),y=t(16347),N=t(18717),j=t(13390),w=t(89442),v=t(17484),D=t(82353),b=t(73216),k=t(70579);const _=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]},C=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};function E(e){let{download:a,onPlay:t,onRemove:s,onRetry:l}=e;const{media:o,status:n,progress:p,size:f,downloadedAt:g,error:N}=a,D="video"===(null===o||void 0===o?void 0:o.type);return(0,k.jsxs)(r.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:(0,A.cn)("flex items-center gap-4 p-4 rounded-lg bg-card hover:bg-card/80 transition-colors group",n===y.DownloadStatus.FAILED&&"border border-red-500/20"),children:[(0,k.jsxs)("div",{className:(0,A.cn)("relative w-16 h-16 rounded-md overflow-hidden shrink-0 cursor-pointer",n===y.DownloadStatus.COMPLETED&&"group-hover:ring-2 ring-primary"),onClick:()=>n===y.DownloadStatus.COMPLETED&&t(o),children:[null!==o&&void 0!==o&&o.thumbnail?(0,k.jsx)("img",{src:o.thumbnail,alt:o.title,className:"w-full h-full object-cover"}):(0,k.jsx)(w.X1,{title:(null===o||void 0===o?void 0:o.title)||"Unknown",id:(null===o||void 0===o?void 0:o.id)||"0",isVideo:D,size:"small"}),n===y.DownloadStatus.COMPLETED&&(0,k.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,k.jsx)(m.A,{className:"w-6 h-6 text-white",fill:"white"})}),n===y.DownloadStatus.DOWNLOADING&&(0,k.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,k.jsxs)("div",{className:"relative w-10 h-10",children:[(0,k.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,k.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-white/20"}),(0,k.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"".concat(.88*p," 88"),strokeLinecap:"round",className:"text-primary transition-all duration-300"})]}),(0,k.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:[p,"%"]})]})})]}),(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsx)("h3",{className:"font-medium truncate",children:(null===o||void 0===o?void 0:o.title)||"Unknown"}),(0,k.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(()=>{switch(n){case y.DownloadStatus.COMPLETED:return(0,k.jsx)(i,{className:"w-4 h-4 text-green-500"});case y.DownloadStatus.DOWNLOADING:return(0,k.jsx)(c.A,{className:"w-4 h-4 text-primary animate-spin"});case y.DownloadStatus.FAILED:return(0,k.jsx)(d.A,{className:"w-4 h-4 text-red-500"});default:return null}})(),(0,k.jsx)("span",{children:(()=>{switch(n){case y.DownloadStatus.COMPLETED:return"Downloaded ".concat(C(g));case y.DownloadStatus.DOWNLOADING:return"Downloading ".concat(p,"%");case y.DownloadStatus.FAILED:return N||"Download failed";default:return"Pending"}})()}),f>0&&n===y.DownloadStatus.COMPLETED&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsx)("span",{children:_(f)})]})]}),(null===o||void 0===o?void 0:o.artist)&&(0,k.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:o.artist})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[n===y.DownloadStatus.COMPLETED&&(0,k.jsx)(j.$,{variant:"ghost",size:"icon",onClick:()=>t(o),className:"text-primary hover:text-primary",children:(0,k.jsx)(m.A,{className:"w-5 h-5",fill:"currentColor"})}),n===y.DownloadStatus.FAILED&&(0,k.jsx)(j.$,{variant:"ghost",size:"icon",onClick:()=>l(o.id),className:"text-yellow-500 hover:text-yellow-400",children:(0,k.jsx)(u.A,{className:"w-5 h-5"})}),(0,k.jsxs)(v.rI,{children:[(0,k.jsx)(v.ty,{asChild:!0,children:(0,k.jsx)(j.$,{variant:"ghost",size:"icon",children:(0,k.jsx)(x.A,{className:"w-5 h-5"})})}),(0,k.jsxs)(v.SQ,{align:"end",children:[n===y.DownloadStatus.COMPLETED&&(0,k.jsxs)(v._2,{onClick:()=>t(o),children:[(0,k.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Play"]}),n===y.DownloadStatus.FAILED&&(0,k.jsxs)(v._2,{onClick:()=>l(o.id),children:[(0,k.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Retry Download"]}),(0,k.jsxs)(v._2,{onClick:()=>s(o.id),className:"text-red-500 focus:text-red-500",children:[(0,k.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})]})]})}function L(){const{user:e}=(0,N.nc)(),{downloads:a,removeDownload:t,retryDownload:n,clearAllDownloads:i,getTotalDownloadSize:m}=(0,y.default)(),{playTrack:u,getDownloadedUrl:x,isDownloaded:A}=y.default.getState(),{playTrack:w}=(0,N.ut)(),[v,C]=(0,l.useState)(!1);if(!e)return(0,k.jsx)(b.C5,{to:"/login",replace:!0});const L=Object.values(a),R=L.filter(e=>e.status===y.DownloadStatus.COMPLETED),S=L.filter(e=>e.status===y.DownloadStatus.DOWNLOADING),O=L.filter(e=>e.status===y.DownloadStatus.FAILED),P=m(),M=async e=>{const a=await y.default.getState().getDownloadedUrl(e.id);w(a?(0,s.A)((0,s.A)({},e),{},{fileUrl:a,isOffline:!0}):e,null,!1)},F=e=>{t(e)},I=e=>{n(e)};return(0,k.jsxs)("div",{className:"min-h-full pb-32",children:[(0,k.jsx)("div",{className:"px-6 pt-6 pb-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,k.jsx)(p.A,{className:"w-8 h-8 text-primary"}),"Downloads"]}),(0,k.jsxs)("p",{className:"text-muted-foreground mt-1",children:[R.length," items \u2022 ",_(P)]})]}),L.length>0&&(0,k.jsxs)(j.$,{variant:"outline",onClick:()=>C(!0),className:"text-red-500 hover:text-red-400 hover:border-red-500/50",children:[(0,k.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),(S.length>0||O.length>0)&&(0,k.jsx)("div",{className:"px-6 pb-4",children:(0,k.jsxs)("div",{className:"flex gap-4",children:[S.length>0&&(0,k.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 text-primary text-sm",children:[(0,k.jsx)(c.A,{className:"w-4 h-4 animate-spin"}),S.length," downloading"]}),O.length>0&&(0,k.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/10 text-red-500 text-sm",children:[(0,k.jsx)(d.A,{className:"w-4 h-4"}),O.length," failed"]})]})}),(0,k.jsx)("div",{className:"px-6",children:0===L.length?(0,k.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,k.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,k.jsx)(f,{className:"w-10 h-10 text-muted-foreground"})}),(0,k.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Downloads Yet"}),(0,k.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Download videos and audio to watch or listen offline. Look for the download button on any media item."})]}):(0,k.jsx)("div",{className:"space-y-2",children:(0,k.jsxs)(o.N,{mode:"popLayout",children:[S.map(e=>(0,k.jsx)(E,{download:e,onPlay:M,onRemove:F,onRetry:I},e.media.id)),O.map(e=>(0,k.jsx)(E,{download:e,onPlay:M,onRemove:F,onRetry:I},e.media.id)),R.map(e=>(0,k.jsx)(E,{download:e,onPlay:M,onRemove:F,onRetry:I},e.media.id))]})})}),R.length>0&&(0,k.jsx)("div",{className:"px-6 mt-8",children:(0,k.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50 flex items-center gap-4",children:[(0,k.jsx)(g,{className:"w-8 h-8 text-muted-foreground"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"font-medium",children:"Storage Used"}),(0,k.jsxs)("p",{className:"text-sm text-muted-foreground",children:[_(P)," used for offline content"]})]})]})}),(0,k.jsx)(D.Lt,{open:v,onOpenChange:C,children:(0,k.jsxs)(D.EO,{children:[(0,k.jsxs)(D.wd,{children:[(0,k.jsx)(D.r7,{children:"Clear All Downloads?"}),(0,k.jsxs)(D.$v,{children:["This will remove all downloaded content (",_(P),"). You can always download them again later."]})]}),(0,k.jsxs)(D.ck,{children:[(0,k.jsx)(D.Zr,{children:"Cancel"}),(0,k.jsx)(D.Rx,{onClick:()=>{i(),C(!1)},className:"bg-red-500 hover:bg-red-600",children:"Clear All"})]})]})})]})}},74796:(e,a,t)=>{t.d(a,{rc:()=>W,ZD:()=>J,UC:()=>G,VY:()=>q,hJ:()=>$,ZL:()=>Y,bL:()=>B,hE:()=>K,l9:()=>V});var s=t(27051),l=t(53986),r=t(65043),o=t(21862),n=t(82814),i=t(57427),c=t(30858),d=t(70579);var m=Symbol("radix.slottable");function u(e){const a=e=>{let{children:a}=e;return(0,d.jsx)(d.Fragment,{children:a})};return a.displayName="".concat(e,".Slottable"),a.__radixId=m,a}const x=["__scopeAlertDialog"],h=["__scopeAlertDialog"],p=["__scopeAlertDialog"],f=["__scopeAlertDialog"],g=["__scopeAlertDialog","children"],A=["__scopeAlertDialog"],y=["__scopeAlertDialog"],N=["__scopeAlertDialog"],j=["__scopeAlertDialog"];var w="AlertDialog",[v,D]=(0,o.A)(w,[i.Hs]),b=(0,i.Hs)(),k=e=>{const{__scopeAlertDialog:a}=e,t=(0,l.A)(e,x),r=b(a);return(0,d.jsx)(i.bL,(0,s.A)((0,s.A)((0,s.A)({},r),t),{},{modal:!0}))};k.displayName=w;var _=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,h),o=b(t);return(0,d.jsx)(i.l9,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});_.displayName="AlertDialogTrigger";var C=e=>{const{__scopeAlertDialog:a}=e,t=(0,l.A)(e,p),r=b(a);return(0,d.jsx)(i.ZL,(0,s.A)((0,s.A)({},r),t))};C.displayName="AlertDialogPortal";var E=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,f),o=b(t);return(0,d.jsx)(i.hJ,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});E.displayName="AlertDialogOverlay";var L="AlertDialogContent",[R,S]=v(L),O=u("AlertDialogContent"),P=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t,children:o}=e,m=(0,l.A)(e,g),u=b(t),x=r.useRef(null),h=(0,n.s)(a,x),p=r.useRef(null);return(0,d.jsx)(i.G$,{contentName:L,titleName:M,docsSlug:"alert-dialog",children:(0,d.jsx)(R,{scope:t,cancelRef:p,children:(0,d.jsxs)(i.UC,(0,s.A)((0,s.A)((0,s.A)({role:"alertdialog"},u),m),{},{ref:h,onOpenAutoFocus:(0,c.mK)(m.onOpenAutoFocus,e=>{var a;e.preventDefault(),null===(a=p.current)||void 0===a||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,d.jsx)(O,{children:o}),(0,d.jsx)(Z,{contentRef:x})]}))})})});P.displayName=L;var M="AlertDialogTitle",F=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,A),o=b(t);return(0,d.jsx)(i.hE,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});F.displayName=M;var I="AlertDialogDescription",T=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,y),o=b(t);return(0,d.jsx)(i.VY,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});T.displayName=I;var z=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,N),o=b(t);return(0,d.jsx)(i.bm,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});z.displayName="AlertDialogAction";var U="AlertDialogCancel",H=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,j),{cancelRef:o}=S(U,t),c=b(t),m=(0,n.s)(a,o);return(0,d.jsx)(i.bm,(0,s.A)((0,s.A)((0,s.A)({},c),r),{},{ref:m}))});H.displayName=U;var Z=e=>{let{contentRef:a}=e;const t="`".concat(L,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(L,"` by passing a `").concat(I,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(L,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null===(e=a.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},B=k,V=_,Y=C,$=E,G=P,W=z,J=H,K=F,q=T},82353:(e,a,t)=>{t.d(a,{$v:()=>b,EO:()=>j,Lt:()=>A,Rx:()=>k,Zr:()=>_,ck:()=>v,r7:()=>D,wd:()=>w});var s=t(27051),l=t(53986),r=t(65043),o=t(74796),n=t(99766),i=t(13390),c=t(70579);const d=["className"],m=["className"],u=["className"],x=["className"],h=["className"],p=["className"],f=["className"],g=["className"],A=o.bL,y=(o.l9,o.ZL),N=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,d);return(0,c.jsx)(o.hJ,(0,s.A)((0,s.A)({className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},r),{},{ref:a}))});N.displayName=o.hJ.displayName;const j=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,m);return(0,c.jsxs)(y,{children:[(0,c.jsx)(N,{}),(0,c.jsx)(o.UC,(0,s.A)({ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},r))]})});j.displayName=o.UC.displayName;const w=e=>{let{className:a}=e,t=(0,l.A)(e,u);return(0,c.jsx)("div",(0,s.A)({className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a)},t))};w.displayName="AlertDialogHeader";const v=e=>{let{className:a}=e,t=(0,l.A)(e,x);return(0,c.jsx)("div",(0,s.A)({className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},t))};v.displayName="AlertDialogFooter";const D=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,h);return(0,c.jsx)(o.hE,(0,s.A)({ref:a,className:(0,n.cn)("text-lg font-semibold",t)},r))});D.displayName=o.hE.displayName;const b=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,p);return(0,c.jsx)(o.VY,(0,s.A)({ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t)},r))});b.displayName=o.VY.displayName;const k=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,f);return(0,c.jsx)(o.rc,(0,s.A)({ref:a,className:(0,n.cn)((0,i.r)(),t)},r))});k.displayName=o.rc.displayName;const _=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,g);return(0,c.jsx)(o.ZD,(0,s.A)({ref:a,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t)},r))});_.displayName=o.ZD.displayName}}]);
//# sourceMappingURL=359.af1a5f5d.chunk.js.map