/*! For license information please see 937.e955226e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[937],{9855:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},13416:(e,s,t)=>{t.d(s,{T:()=>c});var a=t(27051),i=t(53986),n=t(65043),l=t(99766),r=t(70579);const o=["className"],c=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,o);return(0,r.jsx)("textarea",(0,a.A)({className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s},n))});c.displayName="Textarea"},19690:(e,s,t)=>{t.d(s,{Xi:()=>x,av:()=>p,j7:()=>u,tU:()=>m});var a=t(27051),i=t(53986),n=t(65043),l=t(47127),r=t(99766),o=t(70579);const c=["className"],d=["className"],h=["className"],m=l.bL,u=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,c);return(0,o.jsx)(l.B8,(0,a.A)({ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},n))});u.displayName=l.B8.displayName;const x=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,d);return(0,o.jsx)(l.l9,(0,a.A)({ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},n))});x.displayName=l.l9.displayName;const p=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,h);return(0,o.jsx)(l.UC,(0,a.A)({ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},n))});p.displayName=l.UC.displayName},31555:(e,s,t)=>{t.d(s,{E:()=>o});var a=t(27051),i=t(53986),n=(t(65043),t(99766)),l=t(70579);const r=["className"];function o(e){let{className:s}=e,t=(0,i.A)(e,r);return(0,l.jsx)("div",(0,a.A)({className:(0,n.cn)("animate-pulse rounded-md bg-muted",s)},t))}},47097:(e,s,t)=>{t.d(s,{n:()=>w});var a,i,n,l,r,o=t(27051),c=t(65043),d=t(39790),h=t(55149),m=t(38458),u=t(26562),x=t(24558),p=t(25239),f=t(11454),v=t(60329),b=t(99723),g=(a=new WeakMap,i=new WeakMap,n=new WeakMap,l=new WeakMap,r=new WeakSet,class extends v.Q{constructor(e,s){super(),(0,d.A)(this,r),(0,h.A)(this,a,void 0),(0,h.A)(this,i,void 0),(0,h.A)(this,n,void 0),(0,h.A)(this,l,void 0),(0,x.A)(a,this,e),this.setOptions(s),this.bindMethods(),(0,u.A)(r,this,j).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const t=this.options;this.options=(0,m.A)(a,this).defaultMutationOptions(e),(0,b.f8)(this.options,t)||(0,m.A)(a,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,m.A)(n,this),observer:this}),null!==t&&void 0!==t&&t.mutationKey&&this.options.mutationKey&&(0,b.EN)(t.mutationKey)!==(0,b.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(s=(0,m.A)(n,this))||void 0===s?void 0:s.state.status)&&(0,m.A)(n,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,m.A)(n,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,u.A)(r,this,j).call(this),(0,u.A)(r,this,N).call(this,e)}getCurrentResult(){return(0,m.A)(i,this)}reset(){var e;null===(e=(0,m.A)(n,this))||void 0===e||e.removeObserver(this),(0,x.A)(n,this,void 0),(0,u.A)(r,this,j).call(this),(0,u.A)(r,this,N).call(this)}mutate(e,s){var t;return(0,x.A)(l,this,s),null===(t=(0,m.A)(n,this))||void 0===t||t.removeObserver(this),(0,x.A)(n,this,(0,m.A)(a,this).getMutationCache().build((0,m.A)(a,this),this.options)),(0,m.A)(n,this).addObserver(this),(0,m.A)(n,this).execute(e)}});function j(){var e,s;const t=null!==(e=null===(s=(0,m.A)(n,this))||void 0===s?void 0:s.state)&&void 0!==e?e:(0,p.$)();(0,x.A)(i,this,(0,o.A)((0,o.A)({},t),{},{isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}))}function N(e){f.jG.batch(()=>{if((0,m.A)(l,this)&&this.hasListeners()){const u=(0,m.A)(i,this).variables,x=(0,m.A)(i,this).context,p={client:(0,m.A)(a,this),meta:this.options.meta,mutationKey:this.options.mutationKey};var s,t,n,r;if("success"===(null===e||void 0===e?void 0:e.type))null===(s=(t=(0,m.A)(l,this)).onSuccess)||void 0===s||s.call(t,e.data,u,x,p),null===(n=(r=(0,m.A)(l,this)).onSettled)||void 0===n||n.call(r,e.data,null,u,x,p);else if("error"===(null===e||void 0===e?void 0:e.type)){var o,c,d,h;null===(o=(c=(0,m.A)(l,this)).onError)||void 0===o||o.call(c,e.error,u,x,p),null===(d=(h=(0,m.A)(l,this)).onSettled)||void 0===d||d.call(h,void 0,e.error,u,x,p)}}this.listeners.forEach(e=>{e((0,m.A)(i,this))})})}var y=t(63248);function w(e,s){const t=(0,y.jE)(s),[a]=c.useState(()=>new g(t,e));c.useEffect(()=>{a.setOptions(e)},[a,e]);const i=c.useSyncExternalStore(c.useCallback(e=>a.subscribe(f.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n=c.useCallback((e,s)=>{a.mutate(e,s).catch(b.lQ)},[a]);if(i.error&&(0,b.GU)(a.options.throwOnError,[i.error]))throw i.error;return(0,o.A)((0,o.A)({},i),{},{mutate:n,mutateAsync:i.mutate})}},47127:(e,s,t)=>{t.d(s,{B8:()=>L,UC:()=>P,bL:()=>z,l9:()=>O});var a=t(27051),i=t(53986),n=t(65043),l=t(30858),r=t(21862),o=t(96711),c=t(52894),d=t(87914),h=t(14204),m=t(13642),u=t(54490),x=t(70579);const p=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],f=["__scopeTabs","loop"],v=["__scopeTabs","value","disabled"],b=["__scopeTabs","value","forceMount","children"];var g="Tabs",[j,N]=(0,r.A)(g,[o.RG]),y=(0,o.RG)(),[w,A]=j(g),C=n.forwardRef((e,s)=>{const{__scopeTabs:t,value:n,onValueChange:l,defaultValue:r,orientation:o="horizontal",dir:c,activationMode:f="automatic"}=e,v=(0,i.A)(e,p),b=(0,h.jH)(c),[j,N]=(0,m.i)({prop:n,onChange:l,defaultProp:null!==r&&void 0!==r?r:"",caller:g});return(0,x.jsx)(w,{scope:t,baseId:(0,u.B)(),value:j,onValueChange:N,orientation:o,dir:b,activationMode:f,children:(0,x.jsx)(d.sG.div,(0,a.A)((0,a.A)({dir:b,"data-orientation":o},v),{},{ref:s}))})});C.displayName=g;var k="TabsList",S=n.forwardRef((e,s)=>{const{__scopeTabs:t,loop:n=!0}=e,l=(0,i.A)(e,f),r=A(k,t),c=y(t);return(0,x.jsx)(o.bL,(0,a.A)((0,a.A)({asChild:!0},c),{},{orientation:r.orientation,dir:r.dir,loop:n,children:(0,x.jsx)(d.sG.div,(0,a.A)((0,a.A)({role:"tablist","aria-orientation":r.orientation},l),{},{ref:s}))}))});S.displayName=k;var T="TabsTrigger",E=n.forwardRef((e,s)=>{const{__scopeTabs:t,value:n,disabled:r=!1}=e,c=(0,i.A)(e,v),h=A(T,t),m=y(t),u=R(h.baseId,n),p=_(h.baseId,n),f=n===h.value;return(0,x.jsx)(o.q7,(0,a.A)((0,a.A)({asChild:!0},m),{},{focusable:!r,active:f,children:(0,x.jsx)(d.sG.button,(0,a.A)((0,a.A)({type:"button",role:"tab","aria-selected":f,"aria-controls":p,"data-state":f?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u},c),{},{ref:s,onMouseDown:(0,l.mK)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():h.onValueChange(n)}),onKeyDown:(0,l.mK)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&h.onValueChange(n)}),onFocus:(0,l.mK)(e.onFocus,()=>{const e="manual"!==h.activationMode;f||r||!e||h.onValueChange(n)})}))}))});E.displayName=T;var M="TabsContent",I=n.forwardRef((e,s)=>{const{__scopeTabs:t,value:l,forceMount:r,children:o}=e,h=(0,i.A)(e,b),m=A(M,t),u=R(m.baseId,l),p=_(m.baseId,l),f=l===m.value,v=n.useRef(f);return n.useEffect(()=>{const e=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(c.C,{present:r||f,children:t=>{let{present:i}=t;return(0,x.jsx)(d.sG.div,(0,a.A)((0,a.A)({"data-state":f?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!i,id:p,tabIndex:0},h),{},{ref:s,style:(0,a.A)((0,a.A)({},e.style),{},{animationDuration:v.current?"0s":void 0}),children:i&&o}))}})});function R(e,s){return"".concat(e,"-trigger-").concat(s)}function _(e,s){return"".concat(e,"-content-").concat(s)}I.displayName=M;var z=C,L=S,O=E,P=I},50516:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},50797:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(21639).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},85937:(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t(65043),i=t(63248),n=t(12265),l=t(47097),r=t(36210),o=t(36360),c=t(75088),d=t(40614),h=t(87015),m=t(50516),u=t(39292),x=t(19829),p=t(57170),f=t(50797),v=t(21639);const b=(0,v.A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),g=(0,v.A)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var j=t(9855),N=(t(66305),t(91140)),y=t(92264),w=t(13390),A=t(5949),C=t(31555),k=t(19690),S=t(65598),T=t(99766),E=t(13416),M=t(70579);const I=import.meta.env.VITE_API_URL||"https://mediacoreapi-sql.masakalirestrobar.ca";function R(){const e=(0,i.jE)(),[s,t]=(0,a.useState)(""),[v,S]=(0,a.useState)("pending"),[E,R]=(0,a.useState)(null),[L,O]=(0,a.useState)(!1),[P,F]=(0,a.useState)(!1),[V,B]=(0,a.useState)(new Set),{data:U,isLoading:q}=(0,n.I)({queryKey:["admin-subtitles-pending"],queryFn:async()=>{const e=await fetch("".concat(I,"/api/subtitles/admin/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});return(await e.json()).media||[]},enabled:"pending"===v}),{data:K,isLoading:G}=(0,n.I)({queryKey:["admin-subtitles-completed"],queryFn:async()=>{const e=await fetch("".concat(I,"/api/media?hasSubtitles=true&limit=100"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});return(await e.json()).data||[]},enabled:"completed"===v}),$=(0,l.n)({mutationFn:async e=>(await fetch("".concat(I,"/api/subtitles/").concat(e,"/process"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}})).json(),onMutate:e=>{B(s=>new Set([...s,e]))},onSuccess:(e,s)=>{D(s)},onError:(e,s)=>{B(e=>{const t=new Set(e);return t.delete(s),t})}}),D=async s=>{const t=async()=>{const a=await fetch("".concat(I,"/api/subtitles/").concat(s,"/status"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),i=await a.json();"completed"===i.status||"failed"===i.status?(B(e=>{const t=new Set(e);return t.delete(s),t}),e.invalidateQueries(["admin-subtitles-pending"]),e.invalidateQueries(["admin-subtitles-completed"])):setTimeout(t,2e3)};setTimeout(t,2e3)},W=(0,l.n)({mutationFn:async e=>(await fetch("".concat(I,"/api/subtitles/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}})).json(),onSuccess:()=>{e.invalidateQueries(["admin-subtitles-pending"]),e.invalidateQueries(["admin-subtitles-completed"])}}),Q=(0,l.n)({mutationFn:async e=>(await fetch("".concat(I,"/api/subtitles/admin/batch-process"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:JSON.stringify({mediaIds:e})})).json(),onSuccess:e=>{e.queued&&e.queued.forEach(e=>{B(s=>new Set([...s,e.id])),D(e.id)})}}),Z=(null===U||void 0===U?void 0:U.filter(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}))||[],H=(null===K||void 0===K?void 0:K.filter(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase())}))||[],X=e=>{switch(e){case"completed":return(0,M.jsxs)(A.E,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:[(0,M.jsx)(r.A,{className:"h-3 w-3 mr-1"})," Completed"]});case"processing":return(0,M.jsxs)(A.E,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:[(0,M.jsx)(o.A,{className:"h-3 w-3 mr-1 animate-spin"})," Processing"]});case"pending":return(0,M.jsxs)(A.E,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:[(0,M.jsx)(c.A,{className:"h-3 w-3 mr-1"})," Pending"]});case"failed":return(0,M.jsxs)(A.E,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:[(0,M.jsx)(d.A,{className:"h-3 w-3 mr-1"})," Failed"]});default:return(0,M.jsx)(A.E,{variant:"outline",children:"None"})}};return(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,M.jsx)(h.A,{className:"h-6 w-6 text-spotify-green"}),"Subtitle Management"]}),(0,M.jsx)("p",{className:"text-gray-400 mt-1",children:"Generate and manage subtitles/lyrics for audio and video content"})]}),"pending"===v&&Z.length>0&&(0,M.jsxs)(w.$,{onClick:()=>{const e=Z.slice(0,10).map(e=>e.id);Q.mutate(e)},disabled:Q.isPending,className:"bg-spotify-green hover:bg-spotify-green/80",children:[Q.isPending?(0,M.jsx)(o.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,M.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Process All (Max 10)"]})]}),(0,M.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,M.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,M.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,M.jsx)(y.p,{placeholder:"Search media...",value:s,onChange:e=>t(e.target.value),className:"pl-10 bg-white/5 border-white/10"})]}),(0,M.jsx)(k.tU,{value:v,onValueChange:S,children:(0,M.jsxs)(k.j7,{className:"bg-white/5",children:[(0,M.jsx)(k.Xi,{value:"pending",className:"data-[state=active]:bg-spotify-green",children:"Pending"}),(0,M.jsx)(k.Xi,{value:"completed",className:"data-[state=active]:bg-spotify-green",children:"Completed"})]})})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,M.jsx)(N.Zp,{className:"bg-white/5 border-white/10",children:(0,M.jsx)(N.Wu,{className:"pt-6",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-gray-400 text-sm",children:"Pending"}),(0,M.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===U||void 0===U?void 0:U.length)||0})]}),(0,M.jsx)("div",{className:"p-3 bg-yellow-500/20 rounded-full",children:(0,M.jsx)(c.A,{className:"h-6 w-6 text-yellow-400"})})]})})}),(0,M.jsx)(N.Zp,{className:"bg-white/5 border-white/10",children:(0,M.jsx)(N.Wu,{className:"pt-6",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-gray-400 text-sm",children:"Processing"}),(0,M.jsx)("p",{className:"text-2xl font-bold text-white",children:V.size})]}),(0,M.jsx)("div",{className:"p-3 bg-blue-500/20 rounded-full",children:(0,M.jsx)(o.A,{className:"h-6 w-6 text-blue-400 animate-spin"})})]})})}),(0,M.jsx)(N.Zp,{className:"bg-white/5 border-white/10",children:(0,M.jsx)(N.Wu,{className:"pt-6",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{className:"text-gray-400 text-sm",children:"Completed"}),(0,M.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===K||void 0===K?void 0:K.length)||0})]}),(0,M.jsx)("div",{className:"p-3 bg-green-500/20 rounded-full",children:(0,M.jsx)(r.A,{className:"h-6 w-6 text-green-400"})})]})})})]}),(0,M.jsx)(N.Zp,{className:"bg-white/5 border-white/10",children:(0,M.jsxs)(N.Wu,{className:"p-0",children:["pending"===v&&(0,M.jsx)("div",{className:"divide-y divide-white/10",children:q?Array(5).fill(0).map((e,s)=>(0,M.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,M.jsx)(C.E,{className:"h-12 w-12 rounded"}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)(C.E,{className:"h-4 w-48 mb-2"}),(0,M.jsx)(C.E,{className:"h-3 w-24"})]})]},s)):0===Z.length?(0,M.jsxs)("div",{className:"p-12 text-center text-gray-400",children:[(0,M.jsx)(h.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,M.jsx)("p",{children:"No pending media found"}),(0,M.jsx)("p",{className:"text-sm mt-1",children:"All audio/video content has subtitles"})]}):Z.map(e=>(0,M.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-white/5 transition-colors",children:[(0,M.jsx)("div",{className:(0,T.cn)("h-12 w-12 rounded flex items-center justify-center","audio"===e.type?"bg-spotify-green/20":"bg-blue-500/20"),children:"audio"===e.type?(0,M.jsx)(x.A,{className:"h-6 w-6 text-spotify-green"}):(0,M.jsx)(p.A,{className:"h-6 w-6 text-blue-400"})}),(0,M.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,M.jsx)("h3",{className:"text-white font-medium truncate",children:e.title}),(0,M.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[(0,M.jsx)("span",{className:"capitalize",children:e.type}),e.duration&&(0,M.jsx)("span",{children:(0,T.a3)(e.duration)}),(0,M.jsx)("span",{children:(0,T.Yq)(e.created_at)})]})]}),(0,M.jsx)("div",{children:V.has(e.id)?X("processing"):X(e.subtitle_status)}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(w.$,{size:"sm",onClick:()=>$.mutate(e.id),disabled:V.has(e.id),className:"bg-spotify-green hover:bg-spotify-green/80",children:V.has(e.id)?(0,M.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Process"]})}),(0,M.jsxs)(w.$,{size:"sm",variant:"outline",onClick:()=>{R(e),F(!0)},className:"border-white/20 hover:bg-white/10",children:[(0,M.jsx)(f.A,{className:"h-4 w-4 mr-1"}),"Import"]})]})]},e.id))}),"completed"===v&&(0,M.jsx)("div",{className:"divide-y divide-white/10",children:G?Array(5).fill(0).map((e,s)=>(0,M.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,M.jsx)(C.E,{className:"h-12 w-12 rounded"}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)(C.E,{className:"h-4 w-48 mb-2"}),(0,M.jsx)(C.E,{className:"h-3 w-24"})]})]},s)):0===H.length?(0,M.jsxs)("div",{className:"p-12 text-center text-gray-400",children:[(0,M.jsx)(b,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,M.jsx)("p",{children:"No subtitles generated yet"}),(0,M.jsx)("p",{className:"text-sm mt-1",children:"Process some media to see them here"})]}):H.map(e=>(0,M.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-white/5 transition-colors",children:[(0,M.jsx)("div",{className:(0,T.cn)("h-12 w-12 rounded flex items-center justify-center","audio"===e.type?"bg-spotify-green/20":"bg-blue-500/20"),children:"audio"===e.type?(0,M.jsx)(x.A,{className:"h-6 w-6 text-spotify-green"}):(0,M.jsx)(p.A,{className:"h-6 w-6 text-blue-400"})}),(0,M.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,M.jsx)("h3",{className:"text-white font-medium truncate",children:e.title}),(0,M.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[(0,M.jsx)("span",{className:"capitalize",children:e.type}),e.duration&&(0,M.jsx)("span",{children:(0,T.a3)(e.duration)})]})]}),(0,M.jsx)("div",{children:X("completed")}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsxs)(w.$,{size:"sm",variant:"outline",onClick:()=>{R(e),O(!0)},className:"border-white/20 hover:bg-white/10",children:[(0,M.jsx)(g,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,M.jsx)(w.$,{size:"sm",variant:"outline",onClick:()=>{window.confirm("Delete subtitles for this media?")&&W.mutate(e.id)},className:"border-red-500/30 text-red-400 hover:bg-red-500/20",children:(0,M.jsx)(j.A,{className:"h-4 w-4"})})]})]},e.id))})]})}),(0,M.jsx)(_,{open:P,onOpenChange:F,media:E,onSuccess:()=>{e.invalidateQueries(["admin-subtitles-pending"]),e.invalidateQueries(["admin-subtitles-completed"])}}),(0,M.jsx)(z,{open:L,onOpenChange:O,media:E,onSuccess:()=>{e.invalidateQueries(["admin-subtitles-completed"])}})]})}function _(e){let{open:s,onOpenChange:t,media:i,onSuccess:n}=e;const[l,r]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),h=import.meta.env.VITE_API_URL||"https://mediacoreapi-sql.masakalirestrobar.ca";return(0,M.jsx)(S.lG,{open:s,onOpenChange:t,children:(0,M.jsxs)(S.Cf,{className:"bg-spotify-dark-gray border-white/10",children:[(0,M.jsxs)(S.c7,{children:[(0,M.jsx)(S.L3,{className:"text-white",children:"Import Subtitles"}),(0,M.jsxs)(S.rr,{children:['Upload an SRT or VTT file for "',null===i||void 0===i?void 0:i.title,'"']})]}),(0,M.jsx)("div",{className:"space-y-4",children:(0,M.jsxs)("div",{className:"border-2 border-dashed border-white/20 rounded-lg p-8 text-center",children:[(0,M.jsx)("input",{type:"file",accept:".srt,.vtt",onChange:e=>{var s;return r((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},className:"hidden",id:"subtitle-file"}),(0,M.jsxs)("label",{htmlFor:"subtitle-file",className:"cursor-pointer",children:[(0,M.jsx)(f.A,{className:"h-10 w-10 mx-auto mb-3 text-gray-400"}),(0,M.jsx)("p",{className:"text-white font-medium",children:l?l.name:"Click to select file"}),(0,M.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Supports .srt and .vtt formats"})]})]})}),(0,M.jsxs)(S.Es,{children:[(0,M.jsx)(w.$,{variant:"outline",onClick:()=>t(!1),className:"border-white/20",children:"Cancel"}),(0,M.jsxs)(w.$,{onClick:async()=>{if(l&&i){d(!0);try{const e=new FormData;e.append("subtitle",l);const s=await fetch("".concat(h,"/api/subtitles/").concat(i.id,"/import"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))},body:e}),a=await s.json();a.success?(null===n||void 0===n||n(),t(!1),r(null)):alert(a.error||"Import failed")}catch(e){alert("Failed to import subtitles")}finally{d(!1)}}},disabled:!l||c,className:"bg-spotify-green hover:bg-spotify-green/80",children:[c?(0,M.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,M.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Import"]})]})]})})}function z(e){let{open:s,onOpenChange:t,media:i,onSuccess:n}=e;const[l,c]=(0,a.useState)([]),[h,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[v,b]=(0,a.useState)(""),j=import.meta.env.VITE_API_URL||"https://mediacoreapi-sql.masakalirestrobar.ca";a.useEffect(()=>{s&&i&&N()},[s,i]);const N=async()=>{m(!0);try{const e=await fetch("".concat(j,"/api/subtitles/").concat(i.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}}),s=await e.json();s.success&&c(s.subtitles||[])}catch(e){console.error("Failed to load subtitles:",e)}finally{m(!1)}},y=async()=>{if(null!==p){x(!0);try{const e=await fetch("".concat(j,"/api/subtitles/").concat(i.id,"/line/").concat(p),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken")),"Content-Type":"application/json"},body:JSON.stringify({text:v})}),s=await e.json();s.success&&(c(s.subtitles),f(null),null===n||void 0===n||n())}catch(e){alert("Failed to save")}finally{x(!1)}}},A=e=>{const s=Math.floor(e/60),t=Math.floor(e%60);return"".concat(s,":").concat(t.toString().padStart(2,"0"))};return(0,M.jsx)(S.lG,{open:s,onOpenChange:t,children:(0,M.jsxs)(S.Cf,{className:"bg-spotify-dark-gray border-white/10 max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,M.jsxs)(S.c7,{children:[(0,M.jsx)(S.L3,{className:"text-white",children:"Edit Subtitles"}),(0,M.jsxs)(S.rr,{children:['Edit subtitles for "',null===i||void 0===i?void 0:i.title,'"']})]}),(0,M.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 py-4",children:h?Array(5).fill(0).map((e,s)=>(0,M.jsx)(C.E,{className:"h-16 w-full"},s)):0===l.length?(0,M.jsx)("p",{className:"text-center text-gray-400 py-8",children:"No subtitles found"}):l.map((e,s)=>(0,M.jsx)("div",{className:(0,T.cn)("p-3 rounded-lg border transition-colors",p===s?"border-spotify-green bg-spotify-green/10":"border-white/10 bg-white/5 hover:bg-white/10"),children:(0,M.jsxs)("div",{className:"flex items-start gap-3",children:[(0,M.jsxs)("div",{className:"text-xs text-gray-400 font-mono whitespace-nowrap pt-1",children:[A(e.startTime)," - ",A(e.endTime)]}),(0,M.jsx)("div",{className:"flex-1",children:p===s?(0,M.jsx)(E.T,{value:v,onChange:e=>b(e.target.value),className:"bg-white/10 border-white/20 text-white min-h-[60px]",autoFocus:!0}):(0,M.jsx)("p",{className:"text-white",children:e.text})}),(0,M.jsx)("div",{children:p===s?(0,M.jsxs)("div",{className:"flex gap-1",children:[(0,M.jsx)(w.$,{size:"sm",onClick:y,disabled:u,className:"bg-spotify-green hover:bg-spotify-green/80",children:u?(0,M.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,M.jsx)(r.A,{className:"h-4 w-4"})}),(0,M.jsx)(w.$,{size:"sm",variant:"outline",onClick:()=>f(null),className:"border-white/20",children:(0,M.jsx)(d.A,{className:"h-4 w-4"})})]}):(0,M.jsx)(w.$,{size:"sm",variant:"ghost",onClick:()=>{f(s),b(e.text)},className:"text-gray-400 hover:text-white",children:(0,M.jsx)(g,{className:"h-4 w-4"})})})]})},s))}),(0,M.jsx)(S.Es,{children:(0,M.jsx)(w.$,{variant:"outline",onClick:()=>t(!1),className:"border-white/20",children:"Close"})})]})})}},91140:(e,s,t)=>{t.d(s,{BT:()=>v,Wu:()=>b,ZB:()=>f,Zp:()=>x,aR:()=>p});var a=t(27051),i=t(53986),n=t(65043),l=t(99766),r=t(70579);const o=["className"],c=["className"],d=["className","children"],h=["className"],m=["className"],u=["className"],x=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,o);return(0,r.jsx)("div",(0,a.A)({ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",t)},n))});x.displayName="Card";const p=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,c);return(0,r.jsx)("div",(0,a.A)({ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t)},n))});p.displayName="CardHeader";const f=n.forwardRef((e,s)=>{let{className:t,children:n}=e,o=(0,i.A)(e,d);return(0,r.jsx)("h3",(0,a.A)((0,a.A)({ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t)},o),{},{children:n}))});f.displayName="CardTitle";const v=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,h);return(0,r.jsx)("p",(0,a.A)({ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t)},n))});v.displayName="CardDescription";const b=n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,m);return(0,r.jsx)("div",(0,a.A)({ref:s,className:(0,l.cn)("p-6 pt-0",t)},n))});b.displayName="CardContent";n.forwardRef((e,s)=>{let{className:t}=e,n=(0,i.A)(e,u);return(0,r.jsx)("div",(0,a.A)({ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t)},n))}).displayName="CardFooter"}}]);
//# sourceMappingURL=937.e955226e.chunk.js.map